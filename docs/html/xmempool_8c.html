<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.12.0"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>xmempool: xmempool.c File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<script type="text/javascript" src="clipboard.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="cookie.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">xmempool<span id="projectnumber">&#160;1.0</span>
   </div>
   <div id="projectbrief">A Simple Memory Pool Implementation</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.12.0 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() { codefold.init(0); });
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search',false);
  $(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function(){ initResizable(false); });
/* @license-end */
</script>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

</div><!-- top -->
<div id="doc-content">
<div class="header">
  <div class="summary">
<a href="#nested-classes">Data Structures</a> &#124;
<a href="#define-members">Macros</a> &#124;
<a href="#func-members">Functions</a> &#124;
<a href="#var-members">Variables</a>  </div>
  <div class="headertitle"><div class="title">xmempool.c File Reference</div></div>
</div><!--header-->
<div class="contents">
<div class="textblock"><code>#include &quot;<a class="el" href="xmempool_8h_source.html">xmempool.h</a>&quot;</code><br />
<code>#include &lt;stdio.h&gt;</code><br />
<code>#include &lt;stdlib.h&gt;</code><br />
<code>#include &lt;string.h&gt;</code><br />
<code>#include &lt;unistd.h&gt;</code><br />
</div>
<p><a href="xmempool_8c_source.html">Go to the source code of this file.</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="nested-classes" name="nested-classes"></a>
Data Structures</h2></td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structxmem__pool__block.html">xmem_pool_block</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">xmempool - A Simple Memory Pool Implementation  <a href="structxmem__pool__block.html#details">More...</a><br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structxmem__pool.html">xmem_pool</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="define-members" name="define-members"></a>
Macros</h2></td></tr>
<tr class="memitem:af00ed36f2d4a809e90811c216bd5df48" id="r_af00ed36f2d4a809e90811c216bd5df48"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#af00ed36f2d4a809e90811c216bd5df48">MIN_ALLOC_BLOCK_NODE_COUNT</a>&#160;&#160;&#160;(1024)</td></tr>
<tr class="separator:af00ed36f2d4a809e90811c216bd5df48"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9d5ee6b048ad620cce6715c514b5ca82" id="r_a9d5ee6b048ad620cce6715c514b5ca82"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a9d5ee6b048ad620cce6715c514b5ca82">MAX_ALLOC_BLOCK_NODE_COUNT</a>&#160;&#160;&#160;(1024 &lt;&lt; 2)</td></tr>
<tr class="separator:a9d5ee6b048ad620cce6715c514b5ca82"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a677cec2d7bc9da83b43cbb8d634e6f7f" id="r_a677cec2d7bc9da83b43cbb8d634e6f7f"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a677cec2d7bc9da83b43cbb8d634e6f7f">MIN_ALLOC_LENGTH</a>&#160;&#160;&#160;(1024)</td></tr>
<tr class="separator:a677cec2d7bc9da83b43cbb8d634e6f7f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8a7fdf7f250196f23716d71694f4573f" id="r_a8a7fdf7f250196f23716d71694f4573f"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a8a7fdf7f250196f23716d71694f4573f">MAX_ALLOC_LENGTH</a>&#160;&#160;&#160;(1024 &lt;&lt; 2)</td></tr>
<tr class="separator:a8a7fdf7f250196f23716d71694f4573f"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="func-members" name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:a017124d3c7e4814c6502796b39509722" id="r_a017124d3c7e4814c6502796b39509722"><td class="memItemLeft" align="right" valign="top">uint32_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a017124d3c7e4814c6502796b39509722">size_count_with_4</a> (uint32_t size)</td></tr>
<tr class="separator:a017124d3c7e4814c6502796b39509722"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a546b49e9f83ae22868fa368b9553cce7" id="r_a546b49e9f83ae22868fa368b9553cce7"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a546b49e9f83ae22868fa368b9553cce7">_alloc_block_nodes</a> ()</td></tr>
<tr class="memdesc:a546b49e9f83ae22868fa368b9553cce7"><td class="mdescLeft">&#160;</td><td class="mdescRight">Allocate memory for new block nodes.  <br /></td></tr>
<tr class="separator:a546b49e9f83ae22868fa368b9553cce7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af159eb155ecc721f7b0d93a64fee2532" id="r_af159eb155ecc721f7b0d93a64fee2532"><td class="memItemLeft" align="right" valign="top">static <a class="el" href="structxmem__pool__block.html">xmem_pool_block</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#af159eb155ecc721f7b0d93a64fee2532">_get_next_block_node</a> ()</td></tr>
<tr class="memdesc:af159eb155ecc721f7b0d93a64fee2532"><td class="mdescLeft">&#160;</td><td class="mdescRight">Get the next available block node.  <br /></td></tr>
<tr class="separator:af159eb155ecc721f7b0d93a64fee2532"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6c540fd1d956b8b2d1cd96186438d037" id="r_a6c540fd1d956b8b2d1cd96186438d037"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a6c540fd1d956b8b2d1cd96186438d037">_recover_block_node</a> (<a class="el" href="structxmem__pool__block.html">xmem_pool_block</a> *node)</td></tr>
<tr class="separator:a6c540fd1d956b8b2d1cd96186438d037"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a85b9553a877ffa7cca6334817b968984" id="r_a85b9553a877ffa7cca6334817b968984"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a85b9553a877ffa7cca6334817b968984">_xmem_count_free_blocks</a> (<a class="el" href="structxmem__pool.html">xmem_pool</a> *pool)</td></tr>
<tr class="separator:a85b9553a877ffa7cca6334817b968984"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af59c61c4e698c8ad8a8fcdd234212522" id="r_af59c61c4e698c8ad8a8fcdd234212522"><td class="memItemLeft" align="right" valign="top"><a class="el" href="xmempool_8h.html#a3fce2e8b5d5306b76afb7870c053a664">xmem_pool_handle</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#af59c61c4e698c8ad8a8fcdd234212522">_create_pool</a> (uint32_t block_size, uint32_t block_count)</td></tr>
<tr class="memdesc:af59c61c4e698c8ad8a8fcdd234212522"><td class="mdescLeft">&#160;</td><td class="mdescRight">Create a new memory pool.  <br /></td></tr>
<tr class="separator:af59c61c4e698c8ad8a8fcdd234212522"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4a1008d2aa511fb0e5144ddb916b4a3e" id="r_a4a1008d2aa511fb0e5144ddb916b4a3e"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a4a1008d2aa511fb0e5144ddb916b4a3e">xmem_print_info</a> (<a class="el" href="xmempool_8h.html#a3fce2e8b5d5306b76afb7870c053a664">xmem_pool_handle</a> _pool)</td></tr>
<tr class="memdesc:a4a1008d2aa511fb0e5144ddb916b4a3e"><td class="mdescLeft">&#160;</td><td class="mdescRight">Print information about the memory pool.  <br /></td></tr>
<tr class="separator:a4a1008d2aa511fb0e5144ddb916b4a3e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afecd089ea446a199bf591cd94e7372ce" id="r_afecd089ea446a199bf591cd94e7372ce"><td class="memItemLeft" align="right" valign="top"><a class="el" href="xmempool_8h.html#a3fce2e8b5d5306b76afb7870c053a664">xmem_pool_handle</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#afecd089ea446a199bf591cd94e7372ce">xmem_create_pool</a> (unsigned int block_size)</td></tr>
<tr class="separator:afecd089ea446a199bf591cd94e7372ce"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aee79a7d27db17f354fe66b49871aa223" id="r_aee79a7d27db17f354fe66b49871aa223"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#aee79a7d27db17f354fe66b49871aa223">xmem_destroy_pool</a> (<a class="el" href="xmempool_8h.html#a3fce2e8b5d5306b76afb7870c053a664">xmem_pool_handle</a> handle)</td></tr>
<tr class="memdesc:aee79a7d27db17f354fe66b49871aa223"><td class="mdescLeft">&#160;</td><td class="mdescRight">Destroy a memory pool and free all associated resources.  <br /></td></tr>
<tr class="separator:aee79a7d27db17f354fe66b49871aa223"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7ae69189c42c655bb25273f6f255c7a0" id="r_a7ae69189c42c655bb25273f6f255c7a0"><td class="memItemLeft" align="right" valign="top">char *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a7ae69189c42c655bb25273f6f255c7a0">xmem_alloc</a> (<a class="el" href="xmempool_8h.html#a3fce2e8b5d5306b76afb7870c053a664">xmem_pool_handle</a> handle)</td></tr>
<tr class="memdesc:a7ae69189c42c655bb25273f6f255c7a0"><td class="mdescLeft">&#160;</td><td class="mdescRight">Allocate a block from the memory pool.  <br /></td></tr>
<tr class="separator:a7ae69189c42c655bb25273f6f255c7a0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa472911be7f636d75cc749c58043202e" id="r_aa472911be7f636d75cc749c58043202e"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#aa472911be7f636d75cc749c58043202e">xmem_free</a> (<a class="el" href="xmempool_8h.html#a3fce2e8b5d5306b76afb7870c053a664">xmem_pool_handle</a> handle, char *pointer)</td></tr>
<tr class="memdesc:aa472911be7f636d75cc749c58043202e"><td class="mdescLeft">&#160;</td><td class="mdescRight">Free a block back to the memory pool.  <br /></td></tr>
<tr class="separator:aa472911be7f636d75cc749c58043202e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a59bdcd8796f1c2ea3b19b1fe187db069" id="r_a59bdcd8796f1c2ea3b19b1fe187db069"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a59bdcd8796f1c2ea3b19b1fe187db069">xmem_init</a> ()</td></tr>
<tr class="separator:a59bdcd8796f1c2ea3b19b1fe187db069"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3ec7cd7c84271a41ae99ba6a727b4a61" id="r_a3ec7cd7c84271a41ae99ba6a727b4a61"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a3ec7cd7c84271a41ae99ba6a727b4a61">xmem_clean_up</a> ()</td></tr>
<tr class="memdesc:a3ec7cd7c84271a41ae99ba6a727b4a61"><td class="mdescLeft">&#160;</td><td class="mdescRight">Clean up global resources used by xmempool.  <br /></td></tr>
<tr class="separator:a3ec7cd7c84271a41ae99ba6a727b4a61"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="var-members" name="var-members"></a>
Variables</h2></td></tr>
<tr class="memitem:a2f0f93b2aa138808bc0f2c5c2bce09bc" id="r_a2f0f93b2aa138808bc0f2c5c2bce09bc"><td class="memItemLeft" align="right" valign="top">static uint32_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a2f0f93b2aa138808bc0f2c5c2bce09bc">_xmem_pool_next_alloc_block_node_count</a></td></tr>
<tr class="separator:a2f0f93b2aa138808bc0f2c5c2bce09bc"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8f4c2f28bc57149c38953ca0fd26c40a" id="r_a8f4c2f28bc57149c38953ca0fd26c40a"><td class="memItemLeft" align="right" valign="top">static <a class="el" href="structxmem__pool__block.html">xmem_pool_block</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a8f4c2f28bc57149c38953ca0fd26c40a">_free_block_ptr</a> = 0</td></tr>
<tr class="separator:a8f4c2f28bc57149c38953ca0fd26c40a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afb0f258f67a7d6eac5ef90e6987ead30" id="r_afb0f258f67a7d6eac5ef90e6987ead30"><td class="memItemLeft" align="right" valign="top">static <a class="el" href="structxmem__pool__block.html">xmem_pool_block</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#afb0f258f67a7d6eac5ef90e6987ead30">_free_block_ptr_end</a> = 0</td></tr>
<tr class="separator:afb0f258f67a7d6eac5ef90e6987ead30"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a652a9b8a5157e94e718f5d5283008fc4" id="r_a652a9b8a5157e94e718f5d5283008fc4"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a652a9b8a5157e94e718f5d5283008fc4">_xmem_page_size</a> = 0</td></tr>
<tr class="separator:a652a9b8a5157e94e718f5d5283008fc4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a96a49339cc47ea3c27ba0dae822b04df" id="r_a96a49339cc47ea3c27ba0dae822b04df"><td class="memItemLeft" align="right" valign="top">static uint32_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a96a49339cc47ea3c27ba0dae822b04df">_block_size</a> = sizeof(<a class="el" href="structxmem__pool__block.html">xmem_pool_block</a>)</td></tr>
<tr class="separator:a96a49339cc47ea3c27ba0dae822b04df"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<h2 class="groupheader">Macro Definition Documentation</h2>
<a id="a9d5ee6b048ad620cce6715c514b5ca82" name="a9d5ee6b048ad620cce6715c514b5ca82"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9d5ee6b048ad620cce6715c514b5ca82">&#9670;&#160;</a></span>MAX_ALLOC_BLOCK_NODE_COUNT</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define MAX_ALLOC_BLOCK_NODE_COUNT&#160;&#160;&#160;(1024 &lt;&lt; 2)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="xmempool_8c_source.html#l00048">48</a> of file <a class="el" href="xmempool_8c_source.html">xmempool.c</a>.</p>

</div>
</div>
<a id="a8a7fdf7f250196f23716d71694f4573f" name="a8a7fdf7f250196f23716d71694f4573f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8a7fdf7f250196f23716d71694f4573f">&#9670;&#160;</a></span>MAX_ALLOC_LENGTH</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define MAX_ALLOC_LENGTH&#160;&#160;&#160;(1024 &lt;&lt; 2)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="xmempool_8c_source.html#l00050">50</a> of file <a class="el" href="xmempool_8c_source.html">xmempool.c</a>.</p>

</div>
</div>
<a id="af00ed36f2d4a809e90811c216bd5df48" name="af00ed36f2d4a809e90811c216bd5df48"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af00ed36f2d4a809e90811c216bd5df48">&#9670;&#160;</a></span>MIN_ALLOC_BLOCK_NODE_COUNT</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define MIN_ALLOC_BLOCK_NODE_COUNT&#160;&#160;&#160;(1024)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="xmempool_8c_source.html#l00047">47</a> of file <a class="el" href="xmempool_8c_source.html">xmempool.c</a>.</p>

</div>
</div>
<a id="a677cec2d7bc9da83b43cbb8d634e6f7f" name="a677cec2d7bc9da83b43cbb8d634e6f7f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a677cec2d7bc9da83b43cbb8d634e6f7f">&#9670;&#160;</a></span>MIN_ALLOC_LENGTH</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define MIN_ALLOC_LENGTH&#160;&#160;&#160;(1024)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="xmempool_8c_source.html#l00049">49</a> of file <a class="el" href="xmempool_8c_source.html">xmempool.c</a>.</p>

</div>
</div>
<h2 class="groupheader">Function Documentation</h2>
<a id="a546b49e9f83ae22868fa368b9553cce7" name="a546b49e9f83ae22868fa368b9553cce7"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a546b49e9f83ae22868fa368b9553cce7">&#9670;&#160;</a></span>_alloc_block_nodes()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void _alloc_block_nodes </td>
          <td>(</td>
          <td class="paramname"><span class="paramname"><em></em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Allocate memory for new block nodes. </p>
<p>This function allocates a chunk of memory for new block nodes when the current pool is exhausted. It doubles the allocation size each time, up to a maximum defined by MAX_ALLOC_BLOCK_NODE_COUNT. The newly allocated nodes are then added to the free block list. </p>

<p class="definition">Definition at line <a class="el" href="xmempool_8c_source.html#l00074">74</a> of file <a class="el" href="xmempool_8c_source.html">xmempool.c</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">   74</span>                                        {</div>
<div class="line"><span class="lineno">   75</span>  uint32_t size_count = <a class="code hl_variable" href="#a96a49339cc47ea3c27ba0dae822b04df">_block_size</a> * <a class="code hl_variable" href="#a2f0f93b2aa138808bc0f2c5c2bce09bc">_xmem_pool_next_alloc_block_node_count</a>;</div>
<div class="line"><span class="lineno">   76</span>  <a class="code hl_variable" href="#a2f0f93b2aa138808bc0f2c5c2bce09bc">_xmem_pool_next_alloc_block_node_count</a> &lt;&lt;= 1;</div>
<div class="line"><span class="lineno">   77</span>  <span class="keywordflow">if</span> (<a class="code hl_variable" href="#a2f0f93b2aa138808bc0f2c5c2bce09bc">_xmem_pool_next_alloc_block_node_count</a> &gt; <a class="code hl_define" href="#a9d5ee6b048ad620cce6715c514b5ca82">MAX_ALLOC_BLOCK_NODE_COUNT</a>) {</div>
<div class="line"><span class="lineno">   78</span>    <a class="code hl_variable" href="#a2f0f93b2aa138808bc0f2c5c2bce09bc">_xmem_pool_next_alloc_block_node_count</a> = <a class="code hl_define" href="#a9d5ee6b048ad620cce6715c514b5ca82">MAX_ALLOC_BLOCK_NODE_COUNT</a>;</div>
<div class="line"><span class="lineno">   79</span>  }</div>
<div class="line"><span class="lineno">   80</span> </div>
<div class="line"><span class="lineno">   81</span><span class="preprocessor">#ifdef _WIN32</span></div>
<div class="line"><span class="lineno">   82</span>  <span class="keywordtype">char</span>* start = (<span class="keywordtype">char</span>*)malloc(size_count);</div>
<div class="line"><span class="lineno">   83</span><span class="preprocessor">#else</span></div>
<div class="line"><span class="lineno">   84</span>  <span class="keywordtype">char</span>* start;</div>
<div class="line"><span class="lineno">   85</span>  posix_memalign((<span class="keywordtype">void</span>**)&amp;start, <a class="code hl_variable" href="#a652a9b8a5157e94e718f5d5283008fc4">_xmem_page_size</a>, size_count);</div>
<div class="line"><span class="lineno">   86</span><span class="preprocessor">#endif</span></div>
<div class="line"><span class="lineno">   87</span>  <span class="keywordtype">char</span>* block_ptr = start;</div>
<div class="line"><span class="lineno">   88</span>  <span class="keywordtype">char</span>* end = start + size_count;</div>
<div class="line"><span class="lineno">   89</span> </div>
<div class="line"><span class="lineno">   90</span>  <span class="comment">// Check if memory allocation was successful</span></div>
<div class="line"><span class="lineno">   91</span>  <span class="keywordflow">if</span> (!block_ptr) <span class="keywordflow">return</span>;</div>
<div class="line"><span class="lineno">   92</span> </div>
<div class="line"><span class="lineno">   93</span>  <span class="keywordflow">for</span> (; block_ptr &lt; end; block_ptr += <a class="code hl_variable" href="#a96a49339cc47ea3c27ba0dae822b04df">_block_size</a>) {</div>
<div class="line"><span class="lineno">   94</span>    <a class="code hl_struct" href="structxmem__pool__block.html">xmem_pool_block</a>* block = (<a class="code hl_struct" href="structxmem__pool__block.html">xmem_pool_block</a>*)block_ptr;</div>
<div class="line"><span class="lineno">   95</span>    block-&gt;<a class="code hl_variable" href="structxmem__pool__block.html#ac4ac1808fc99088927d53c5379d6aeb4">is_block_start</a> = (block_ptr == start);</div>
<div class="line"><span class="lineno">   96</span>    block-&gt;<a class="code hl_variable" href="structxmem__pool__block.html#ac5d567af757e520ea648f80f87a3e062">start</a> = 0;</div>
<div class="line"><span class="lineno">   97</span> </div>
<div class="line"><span class="lineno">   98</span>    <span class="comment">// Link the current block to the previous one, except for the first block</span></div>
<div class="line"><span class="lineno">   99</span>    <span class="keywordflow">if</span> (block_ptr != start) {</div>
<div class="line"><span class="lineno">  100</span>      ((<a class="code hl_struct" href="structxmem__pool__block.html">xmem_pool_block</a>*)(block_ptr - <a class="code hl_variable" href="#a96a49339cc47ea3c27ba0dae822b04df">_block_size</a>))-&gt;next = block;</div>
<div class="line"><span class="lineno">  101</span>    }</div>
<div class="line"><span class="lineno">  102</span> </div>
<div class="line"><span class="lineno">  103</span>    block-&gt;<a class="code hl_variable" href="structxmem__pool__block.html#a6875d9d46a942427f1377f5d050d0ad0">block_size</a> = 0;</div>
<div class="line"><span class="lineno">  104</span>  }</div>
<div class="line"><span class="lineno">  105</span>  ((<a class="code hl_struct" href="structxmem__pool__block.html">xmem_pool_block</a>*)(end - <a class="code hl_variable" href="#a96a49339cc47ea3c27ba0dae822b04df">_block_size</a>))-&gt;next = 0;</div>
<div class="line"><span class="lineno">  106</span> </div>
<div class="line"><span class="lineno">  107</span>  <span class="comment">// Add newly allocated blocks to the free list</span></div>
<div class="line"><span class="lineno">  108</span>  <span class="keywordflow">if</span> (<a class="code hl_variable" href="#a8f4c2f28bc57149c38953ca0fd26c40a">_free_block_ptr</a> &amp;&amp; <a class="code hl_variable" href="#afb0f258f67a7d6eac5ef90e6987ead30">_free_block_ptr_end</a>) {</div>
<div class="line"><span class="lineno">  109</span>    <span class="comment">// Append new blocks to the existing free list</span></div>
<div class="line"><span class="lineno">  110</span>    <a class="code hl_variable" href="#afb0f258f67a7d6eac5ef90e6987ead30">_free_block_ptr_end</a>-&gt;<a class="code hl_variable" href="structxmem__pool__block.html#a6787e0a646a2aaba653ecce38caa94eb">next</a> = (<a class="code hl_struct" href="structxmem__pool__block.html">xmem_pool_block</a>*)start;</div>
<div class="line"><span class="lineno">  111</span>  } <span class="keywordflow">else</span> {</div>
<div class="line"><span class="lineno">  112</span>    <span class="comment">// Initialize the free list with the new blocks</span></div>
<div class="line"><span class="lineno">  113</span>    <a class="code hl_variable" href="#a8f4c2f28bc57149c38953ca0fd26c40a">_free_block_ptr</a> = (<a class="code hl_struct" href="structxmem__pool__block.html">xmem_pool_block</a>*)start;</div>
<div class="line"><span class="lineno">  114</span>  }</div>
<div class="line"><span class="lineno">  115</span> </div>
<div class="line"><span class="lineno">  116</span>  <a class="code hl_variable" href="#afb0f258f67a7d6eac5ef90e6987ead30">_free_block_ptr_end</a> = (<a class="code hl_struct" href="structxmem__pool__block.html">xmem_pool_block</a>*)(end - <a class="code hl_variable" href="#a96a49339cc47ea3c27ba0dae822b04df">_block_size</a>);</div>
<div class="line"><span class="lineno">  117</span>}</div>
<div class="ttc" id="astructxmem__pool__block_html"><div class="ttname"><a href="structxmem__pool__block.html">xmem_pool_block</a></div><div class="ttdoc">xmempool - A Simple Memory Pool Implementation</div><div class="ttdef"><b>Definition</b> <a href="xmempool_8c_source.html#l00026">xmempool.c:26</a></div></div>
<div class="ttc" id="astructxmem__pool__block_html_a6787e0a646a2aaba653ecce38caa94eb"><div class="ttname"><a href="structxmem__pool__block.html#a6787e0a646a2aaba653ecce38caa94eb">xmem_pool_block::next</a></div><div class="ttdeci">struct xmem_pool_block * next</div><div class="ttdef"><b>Definition</b> <a href="xmempool_8c_source.html#l00029">xmempool.c:29</a></div></div>
<div class="ttc" id="astructxmem__pool__block_html_a6875d9d46a942427f1377f5d050d0ad0"><div class="ttname"><a href="structxmem__pool__block.html#a6875d9d46a942427f1377f5d050d0ad0">xmem_pool_block::block_size</a></div><div class="ttdeci">uint32_t block_size</div><div class="ttdef"><b>Definition</b> <a href="xmempool_8c_source.html#l00028">xmempool.c:28</a></div></div>
<div class="ttc" id="astructxmem__pool__block_html_ac4ac1808fc99088927d53c5379d6aeb4"><div class="ttname"><a href="structxmem__pool__block.html#ac4ac1808fc99088927d53c5379d6aeb4">xmem_pool_block::is_block_start</a></div><div class="ttdeci">uint32_t is_block_start</div><div class="ttdef"><b>Definition</b> <a href="xmempool_8c_source.html#l00030">xmempool.c:30</a></div></div>
<div class="ttc" id="astructxmem__pool__block_html_ac5d567af757e520ea648f80f87a3e062"><div class="ttname"><a href="structxmem__pool__block.html#ac5d567af757e520ea648f80f87a3e062">xmem_pool_block::start</a></div><div class="ttdeci">char * start</div><div class="ttdef"><b>Definition</b> <a href="xmempool_8c_source.html#l00027">xmempool.c:27</a></div></div>
<div class="ttc" id="axmempool_8c_html_a2f0f93b2aa138808bc0f2c5c2bce09bc"><div class="ttname"><a href="#a2f0f93b2aa138808bc0f2c5c2bce09bc">_xmem_pool_next_alloc_block_node_count</a></div><div class="ttdeci">static uint32_t _xmem_pool_next_alloc_block_node_count</div><div class="ttdef"><b>Definition</b> <a href="xmempool_8c_source.html#l00051">xmempool.c:51</a></div></div>
<div class="ttc" id="axmempool_8c_html_a652a9b8a5157e94e718f5d5283008fc4"><div class="ttname"><a href="#a652a9b8a5157e94e718f5d5283008fc4">_xmem_page_size</a></div><div class="ttdeci">static int _xmem_page_size</div><div class="ttdef"><b>Definition</b> <a href="xmempool_8c_source.html#l00055">xmempool.c:55</a></div></div>
<div class="ttc" id="axmempool_8c_html_a8f4c2f28bc57149c38953ca0fd26c40a"><div class="ttname"><a href="#a8f4c2f28bc57149c38953ca0fd26c40a">_free_block_ptr</a></div><div class="ttdeci">static xmem_pool_block * _free_block_ptr</div><div class="ttdef"><b>Definition</b> <a href="xmempool_8c_source.html#l00053">xmempool.c:53</a></div></div>
<div class="ttc" id="axmempool_8c_html_a96a49339cc47ea3c27ba0dae822b04df"><div class="ttname"><a href="#a96a49339cc47ea3c27ba0dae822b04df">_block_size</a></div><div class="ttdeci">static uint32_t _block_size</div><div class="ttdef"><b>Definition</b> <a href="xmempool_8c_source.html#l00056">xmempool.c:56</a></div></div>
<div class="ttc" id="axmempool_8c_html_a9d5ee6b048ad620cce6715c514b5ca82"><div class="ttname"><a href="#a9d5ee6b048ad620cce6715c514b5ca82">MAX_ALLOC_BLOCK_NODE_COUNT</a></div><div class="ttdeci">#define MAX_ALLOC_BLOCK_NODE_COUNT</div><div class="ttdef"><b>Definition</b> <a href="xmempool_8c_source.html#l00048">xmempool.c:48</a></div></div>
<div class="ttc" id="axmempool_8c_html_afb0f258f67a7d6eac5ef90e6987ead30"><div class="ttname"><a href="#afb0f258f67a7d6eac5ef90e6987ead30">_free_block_ptr_end</a></div><div class="ttdeci">static xmem_pool_block * _free_block_ptr_end</div><div class="ttdef"><b>Definition</b> <a href="xmempool_8c_source.html#l00054">xmempool.c:54</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="af59c61c4e698c8ad8a8fcdd234212522" name="af59c61c4e698c8ad8a8fcdd234212522"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af59c61c4e698c8ad8a8fcdd234212522">&#9670;&#160;</a></span>_create_pool()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="xmempool_8h.html#a3fce2e8b5d5306b76afb7870c053a664">xmem_pool_handle</a> _create_pool </td>
          <td>(</td>
          <td class="paramtype">uint32_t</td>          <td class="paramname"><span class="paramname"><em>block_size</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t</td>          <td class="paramname"><span class="paramname"><em>block_count</em></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Create a new memory pool. </p>
<p>This function creates a new memory pool with the specified block size and count. It allocates memory for the pool structure and the actual memory blocks, then initializes the free block list.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">block_size</td><td>Size of each memory block in the pool </td></tr>
    <tr><td class="paramname">block_count</td><td>Number of blocks to allocate initially </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Handle to the created pool, or NULL if creation failed </dd></dl>

<p class="definition">Definition at line <a class="el" href="xmempool_8c_source.html#l00189">189</a> of file <a class="el" href="xmempool_8c_source.html">xmempool.c</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  189</span>                                                                         {</div>
<div class="line"><span class="lineno">  190</span>  <span class="keyword">static</span> uint32_t _pool_size = <span class="keyword">sizeof</span>(<a class="code hl_struct" href="structxmem__pool.html">xmem_pool</a>);</div>
<div class="line"><span class="lineno">  191</span>  <a class="code hl_struct" href="structxmem__pool.html">xmem_pool</a>* pool = (<a class="code hl_struct" href="structxmem__pool.html">xmem_pool</a>*)malloc(_pool_size);</div>
<div class="line"><span class="lineno">  192</span>  uint32_t size_count = block_count * block_size;</div>
<div class="line"><span class="lineno">  193</span>  uint32_t alloc_size = <a class="code hl_function" href="#a017124d3c7e4814c6502796b39509722">size_count_with_4</a>(size_count);</div>
<div class="line"><span class="lineno">  194</span>  <span class="keywordtype">char</span>* space;</div>
<div class="line"><span class="lineno">  195</span> </div>
<div class="line"><span class="lineno">  196</span><span class="preprocessor">#ifndef _WIN32</span></div>
<div class="line"><span class="lineno">  197</span>  <span class="keywordflow">if</span> (<a class="code hl_variable" href="#a652a9b8a5157e94e718f5d5283008fc4">_xmem_page_size</a> &lt; alloc_size) {</div>
<div class="line"><span class="lineno">  198</span>    posix_memalign((<span class="keywordtype">void</span>**)&amp;space, <a class="code hl_variable" href="#a652a9b8a5157e94e718f5d5283008fc4">_xmem_page_size</a>, alloc_size);</div>
<div class="line"><span class="lineno">  199</span>  } <span class="keywordflow">else</span> {</div>
<div class="line"><span class="lineno">  200</span><span class="preprocessor">#endif</span></div>
<div class="line"><span class="lineno">  201</span>    space = (<span class="keywordtype">char</span>*)malloc(size_count);</div>
<div class="line"><span class="lineno">  202</span><span class="preprocessor">#ifndef _WIN32</span></div>
<div class="line"><span class="lineno">  203</span>  }</div>
<div class="line"><span class="lineno">  204</span><span class="preprocessor">#endif</span></div>
<div class="line"><span class="lineno">  205</span>  <a class="code hl_struct" href="structxmem__pool__block.html">xmem_pool_block</a>* start_block = 0;</div>
<div class="line"><span class="lineno">  206</span>  <a class="code hl_struct" href="structxmem__pool__block.html">xmem_pool_block</a>* end_block = 0;</div>
<div class="line"><span class="lineno">  207</span> </div>
<div class="line"><span class="lineno">  208</span>  <span class="comment">// Allocate memory for the pool structure</span></div>
<div class="line"><span class="lineno">  209</span>  <span class="keywordflow">if</span> (!pool) <span class="keywordflow">return</span> (<span class="keywordtype">char</span>*)0;</div>
<div class="line"><span class="lineno">  210</span>  <span class="keywordflow">if</span> (!space) {</div>
<div class="line"><span class="lineno">  211</span>    free(pool);</div>
<div class="line"><span class="lineno">  212</span>    <span class="keywordflow">return</span> (<span class="keywordtype">char</span>*)0;</div>
<div class="line"><span class="lineno">  213</span>  }</div>
<div class="line"><span class="lineno">  214</span> </div>
<div class="line"><span class="lineno">  215</span>  <span class="comment">// Initialize pool properties</span></div>
<div class="line"><span class="lineno">  216</span>  pool-&gt;<a class="code hl_variable" href="structxmem__pool.html#a12120dc7808ef4f91d861eae6f6d29f1">start</a> = space;</div>
<div class="line"><span class="lineno">  217</span>  pool-&gt;<a class="code hl_variable" href="structxmem__pool.html#aea3ab4393ae4b652f106b866e76fff06">end</a> = space + (block_count * block_size);</div>
<div class="line"><span class="lineno">  218</span> </div>
<div class="line"><span class="lineno">  219</span>  pool-&gt;<a class="code hl_variable" href="structxmem__pool.html#a999a5e9a0ebafb774fc33f06ff014d12">block_size</a> = block_size;</div>
<div class="line"><span class="lineno">  220</span>  pool-&gt;<a class="code hl_variable" href="structxmem__pool.html#a5c4ccb1a0fd0de6808e27a527d09c966">block_count</a> = block_count;</div>
<div class="line"><span class="lineno">  221</span>  pool-&gt;<a class="code hl_variable" href="structxmem__pool.html#a1929a43391b4a96acaba99885077f1bc">next</a> = 0;</div>
<div class="line"><span class="lineno">  222</span> </div>
<div class="line"><span class="lineno">  223</span>  pool-&gt;<a class="code hl_variable" href="structxmem__pool.html#af1fb94eb5efcbd8f20bc0e4b97629ff6">next_alloc_length</a> = block_count &lt;&lt; 1;</div>
<div class="line"><span class="lineno">  224</span>  <span class="keywordflow">if</span> (pool-&gt;<a class="code hl_variable" href="structxmem__pool.html#af1fb94eb5efcbd8f20bc0e4b97629ff6">next_alloc_length</a> &gt; <a class="code hl_define" href="#a8a7fdf7f250196f23716d71694f4573f">MAX_ALLOC_LENGTH</a>) {</div>
<div class="line"><span class="lineno">  225</span>    pool-&gt;<a class="code hl_variable" href="structxmem__pool.html#af1fb94eb5efcbd8f20bc0e4b97629ff6">next_alloc_length</a> = <a class="code hl_define" href="#a8a7fdf7f250196f23716d71694f4573f">MAX_ALLOC_LENGTH</a>;</div>
<div class="line"><span class="lineno">  226</span>  }</div>
<div class="line"><span class="lineno">  227</span> </div>
<div class="line"><span class="lineno">  228</span>  <span class="comment">// Initialize free blocks</span></div>
<div class="line"><span class="lineno">  229</span>  <span class="keywordflow">for</span> (; space &lt; pool-&gt;<a class="code hl_variable" href="structxmem__pool.html#aea3ab4393ae4b652f106b866e76fff06">end</a>; space += block_size) {</div>
<div class="line"><span class="lineno">  230</span>    <a class="code hl_struct" href="structxmem__pool__block.html">xmem_pool_block</a>* wrapper = <a class="code hl_function" href="#af159eb155ecc721f7b0d93a64fee2532">_get_next_block_node</a>();</div>
<div class="line"><span class="lineno">  231</span>    <span class="keywordflow">if</span> (!start_block) {</div>
<div class="line"><span class="lineno">  232</span>      start_block = wrapper;</div>
<div class="line"><span class="lineno">  233</span>    }</div>
<div class="line"><span class="lineno">  234</span> </div>
<div class="line"><span class="lineno">  235</span>    <span class="comment">// Handle allocation failure</span></div>
<div class="line"><span class="lineno">  236</span>    <span class="keywordflow">if</span> (!wrapper) {</div>
<div class="line"><span class="lineno">  237</span>      free(pool);</div>
<div class="line"><span class="lineno">  238</span>      free(space);</div>
<div class="line"><span class="lineno">  239</span>      <span class="keywordflow">while</span> (start_block) {</div>
<div class="line"><span class="lineno">  240</span>        <a class="code hl_struct" href="structxmem__pool__block.html">xmem_pool_block</a>* next = start_block-&gt;<a class="code hl_variable" href="structxmem__pool__block.html#a6787e0a646a2aaba653ecce38caa94eb">next</a>;</div>
<div class="line"><span class="lineno">  241</span>        <a class="code hl_function" href="#a6c540fd1d956b8b2d1cd96186438d037">_recover_block_node</a>(start_block);</div>
<div class="line"><span class="lineno">  242</span>        start_block = next;</div>
<div class="line"><span class="lineno">  243</span>      }</div>
<div class="line"><span class="lineno">  244</span>      <span class="keywordflow">return</span> 0;</div>
<div class="line"><span class="lineno">  245</span>    }</div>
<div class="line"><span class="lineno">  246</span> </div>
<div class="line"><span class="lineno">  247</span>    wrapper-&gt;<a class="code hl_variable" href="structxmem__pool__block.html#a6875d9d46a942427f1377f5d050d0ad0">block_size</a> = block_size;</div>
<div class="line"><span class="lineno">  248</span>    wrapper-&gt;<a class="code hl_variable" href="structxmem__pool__block.html#ac5d567af757e520ea648f80f87a3e062">start</a> = space;</div>
<div class="line"><span class="lineno">  249</span>    wrapper-&gt;<a class="code hl_variable" href="structxmem__pool__block.html#a6787e0a646a2aaba653ecce38caa94eb">next</a> = 0;</div>
<div class="line"><span class="lineno">  250</span> </div>
<div class="line"><span class="lineno">  251</span>    <span class="comment">// Link blocks in the free list</span></div>
<div class="line"><span class="lineno">  252</span>    <span class="keywordflow">if</span> (end_block) {</div>
<div class="line"><span class="lineno">  253</span>      end_block-&gt;<a class="code hl_variable" href="structxmem__pool__block.html#a6787e0a646a2aaba653ecce38caa94eb">next</a> = wrapper;</div>
<div class="line"><span class="lineno">  254</span>    }</div>
<div class="line"><span class="lineno">  255</span>    end_block = wrapper;</div>
<div class="line"><span class="lineno">  256</span>  }</div>
<div class="line"><span class="lineno">  257</span> </div>
<div class="line"><span class="lineno">  258</span>  pool-&gt;<a class="code hl_variable" href="structxmem__pool.html#ae129fe4209627a82f7319037b60c5612">free_blocks</a> = start_block;</div>
<div class="line"><span class="lineno">  259</span>  pool-&gt;<a class="code hl_variable" href="structxmem__pool.html#a59becc4c6a86620a973ef5d812d35570">free_blocks_tail</a> = end_block;</div>
<div class="line"><span class="lineno">  260</span> </div>
<div class="line"><span class="lineno">  261</span>  <span class="keywordflow">return</span> (<span class="keywordtype">char</span>*)pool;</div>
<div class="line"><span class="lineno">  262</span>}</div>
<div class="ttc" id="astructxmem__pool_html"><div class="ttname"><a href="structxmem__pool.html">xmem_pool</a></div><div class="ttdef"><b>Definition</b> <a href="xmempool_8c_source.html#l00033">xmempool.c:33</a></div></div>
<div class="ttc" id="astructxmem__pool_html_a12120dc7808ef4f91d861eae6f6d29f1"><div class="ttname"><a href="structxmem__pool.html#a12120dc7808ef4f91d861eae6f6d29f1">xmem_pool::start</a></div><div class="ttdeci">char * start</div><div class="ttdef"><b>Definition</b> <a href="xmempool_8c_source.html#l00037">xmempool.c:37</a></div></div>
<div class="ttc" id="astructxmem__pool_html_a1929a43391b4a96acaba99885077f1bc"><div class="ttname"><a href="structxmem__pool.html#a1929a43391b4a96acaba99885077f1bc">xmem_pool::next</a></div><div class="ttdeci">struct xmem_pool * next</div><div class="ttdef"><b>Definition</b> <a href="xmempool_8c_source.html#l00042">xmempool.c:42</a></div></div>
<div class="ttc" id="astructxmem__pool_html_a59becc4c6a86620a973ef5d812d35570"><div class="ttname"><a href="structxmem__pool.html#a59becc4c6a86620a973ef5d812d35570">xmem_pool::free_blocks_tail</a></div><div class="ttdeci">xmem_pool_block * free_blocks_tail</div><div class="ttdef"><b>Definition</b> <a href="xmempool_8c_source.html#l00041">xmempool.c:41</a></div></div>
<div class="ttc" id="astructxmem__pool_html_a5c4ccb1a0fd0de6808e27a527d09c966"><div class="ttname"><a href="structxmem__pool.html#a5c4ccb1a0fd0de6808e27a527d09c966">xmem_pool::block_count</a></div><div class="ttdeci">uint32_t block_count</div><div class="ttdef"><b>Definition</b> <a href="xmempool_8c_source.html#l00035">xmempool.c:35</a></div></div>
<div class="ttc" id="astructxmem__pool_html_a999a5e9a0ebafb774fc33f06ff014d12"><div class="ttname"><a href="structxmem__pool.html#a999a5e9a0ebafb774fc33f06ff014d12">xmem_pool::block_size</a></div><div class="ttdeci">uint32_t block_size</div><div class="ttdef"><b>Definition</b> <a href="xmempool_8c_source.html#l00034">xmempool.c:34</a></div></div>
<div class="ttc" id="astructxmem__pool_html_ae129fe4209627a82f7319037b60c5612"><div class="ttname"><a href="structxmem__pool.html#ae129fe4209627a82f7319037b60c5612">xmem_pool::free_blocks</a></div><div class="ttdeci">xmem_pool_block * free_blocks</div><div class="ttdef"><b>Definition</b> <a href="xmempool_8c_source.html#l00040">xmempool.c:40</a></div></div>
<div class="ttc" id="astructxmem__pool_html_aea3ab4393ae4b652f106b866e76fff06"><div class="ttname"><a href="structxmem__pool.html#aea3ab4393ae4b652f106b866e76fff06">xmem_pool::end</a></div><div class="ttdeci">char * end</div><div class="ttdef"><b>Definition</b> <a href="xmempool_8c_source.html#l00038">xmempool.c:38</a></div></div>
<div class="ttc" id="astructxmem__pool_html_af1fb94eb5efcbd8f20bc0e4b97629ff6"><div class="ttname"><a href="structxmem__pool.html#af1fb94eb5efcbd8f20bc0e4b97629ff6">xmem_pool::next_alloc_length</a></div><div class="ttdeci">uint32_t next_alloc_length</div><div class="ttdef"><b>Definition</b> <a href="xmempool_8c_source.html#l00044">xmempool.c:44</a></div></div>
<div class="ttc" id="axmempool_8c_html_a017124d3c7e4814c6502796b39509722"><div class="ttname"><a href="#a017124d3c7e4814c6502796b39509722">size_count_with_4</a></div><div class="ttdeci">uint32_t size_count_with_4(uint32_t size)</div><div class="ttdef"><b>Definition</b> <a href="xmempool_8c_source.html#l00058">xmempool.c:58</a></div></div>
<div class="ttc" id="axmempool_8c_html_a6c540fd1d956b8b2d1cd96186438d037"><div class="ttname"><a href="#a6c540fd1d956b8b2d1cd96186438d037">_recover_block_node</a></div><div class="ttdeci">static void _recover_block_node(xmem_pool_block *node)</div><div class="ttdef"><b>Definition</b> <a href="xmempool_8c_source.html#l00149">xmempool.c:149</a></div></div>
<div class="ttc" id="axmempool_8c_html_a8a7fdf7f250196f23716d71694f4573f"><div class="ttname"><a href="#a8a7fdf7f250196f23716d71694f4573f">MAX_ALLOC_LENGTH</a></div><div class="ttdeci">#define MAX_ALLOC_LENGTH</div><div class="ttdef"><b>Definition</b> <a href="xmempool_8c_source.html#l00050">xmempool.c:50</a></div></div>
<div class="ttc" id="axmempool_8c_html_af159eb155ecc721f7b0d93a64fee2532"><div class="ttname"><a href="#af159eb155ecc721f7b0d93a64fee2532">_get_next_block_node</a></div><div class="ttdeci">static xmem_pool_block * _get_next_block_node()</div><div class="ttdoc">Get the next available block node.</div><div class="ttdef"><b>Definition</b> <a href="xmempool_8c_source.html#l00127">xmempool.c:127</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="af159eb155ecc721f7b0d93a64fee2532" name="af159eb155ecc721f7b0d93a64fee2532"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af159eb155ecc721f7b0d93a64fee2532">&#9670;&#160;</a></span>_get_next_block_node()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static <a class="el" href="structxmem__pool__block.html">xmem_pool_block</a> * _get_next_block_node </td>
          <td>(</td>
          <td class="paramname"><span class="paramname"><em></em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Get the next available block node. </p>
<p>This function returns the next available block node from the free list. If the free list is empty, it calls <a class="el" href="#a546b49e9f83ae22868fa368b9553cce7" title="Allocate memory for new block nodes.">_alloc_block_nodes()</a> to allocate more.</p>
<dl class="section return"><dt>Returns</dt><dd>Pointer to the next available block node, or NULL if allocation fails </dd></dl>

<p class="definition">Definition at line <a class="el" href="xmempool_8c_source.html#l00127">127</a> of file <a class="el" href="xmempool_8c_source.html">xmempool.c</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  127</span>                                                      {</div>
<div class="line"><span class="lineno">  128</span>  <a class="code hl_struct" href="structxmem__pool__block.html">xmem_pool_block</a>* should_return;</div>
<div class="line"><span class="lineno">  129</span> </div>
<div class="line"><span class="lineno">  130</span>  <span class="comment">// If no more block node, generate a new block node list</span></div>
<div class="line"><span class="lineno">  131</span>  <span class="keywordflow">if</span> (!<a class="code hl_variable" href="#a8f4c2f28bc57149c38953ca0fd26c40a">_free_block_ptr</a>) {</div>
<div class="line"><span class="lineno">  132</span>    <a class="code hl_function" href="#a546b49e9f83ae22868fa368b9553cce7">_alloc_block_nodes</a>();</div>
<div class="line"><span class="lineno">  133</span>  }</div>
<div class="line"><span class="lineno">  134</span> </div>
<div class="line"><span class="lineno">  135</span>  <span class="comment">// If still no more block node, return NULL to indicate error</span></div>
<div class="line"><span class="lineno">  136</span>  <span class="keywordflow">if</span> (!<a class="code hl_variable" href="#a8f4c2f28bc57149c38953ca0fd26c40a">_free_block_ptr</a>) <span class="keywordflow">return</span> (<a class="code hl_struct" href="structxmem__pool__block.html">xmem_pool_block</a>*)0;</div>
<div class="line"><span class="lineno">  137</span> </div>
<div class="line"><span class="lineno">  138</span>  should_return = <a class="code hl_variable" href="#a8f4c2f28bc57149c38953ca0fd26c40a">_free_block_ptr</a>;</div>
<div class="line"><span class="lineno">  139</span>  <a class="code hl_variable" href="#a8f4c2f28bc57149c38953ca0fd26c40a">_free_block_ptr</a> = <a class="code hl_variable" href="#a8f4c2f28bc57149c38953ca0fd26c40a">_free_block_ptr</a>-&gt;<a class="code hl_variable" href="structxmem__pool__block.html#a6787e0a646a2aaba653ecce38caa94eb">next</a>;</div>
<div class="line"><span class="lineno">  140</span> </div>
<div class="line"><span class="lineno">  141</span>  <span class="comment">// If should_return is the last one, set the tail to NULL</span></div>
<div class="line"><span class="lineno">  142</span>  <span class="keywordflow">if</span> (should_return == <a class="code hl_variable" href="#afb0f258f67a7d6eac5ef90e6987ead30">_free_block_ptr_end</a>) {</div>
<div class="line"><span class="lineno">  143</span>    <a class="code hl_variable" href="#afb0f258f67a7d6eac5ef90e6987ead30">_free_block_ptr_end</a> = 0;</div>
<div class="line"><span class="lineno">  144</span>  }</div>
<div class="line"><span class="lineno">  145</span> </div>
<div class="line"><span class="lineno">  146</span>  <span class="keywordflow">return</span> should_return;</div>
<div class="line"><span class="lineno">  147</span>}</div>
<div class="ttc" id="axmempool_8c_html_a546b49e9f83ae22868fa368b9553cce7"><div class="ttname"><a href="#a546b49e9f83ae22868fa368b9553cce7">_alloc_block_nodes</a></div><div class="ttdeci">static void _alloc_block_nodes()</div><div class="ttdoc">Allocate memory for new block nodes.</div><div class="ttdef"><b>Definition</b> <a href="xmempool_8c_source.html#l00074">xmempool.c:74</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a6c540fd1d956b8b2d1cd96186438d037" name="a6c540fd1d956b8b2d1cd96186438d037"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6c540fd1d956b8b2d1cd96186438d037">&#9670;&#160;</a></span>_recover_block_node()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void _recover_block_node </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structxmem__pool__block.html">xmem_pool_block</a> *</td>          <td class="paramname"><span class="paramname"><em>node</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="xmempool_8c_source.html#l00149">149</a> of file <a class="el" href="xmempool_8c_source.html">xmempool.c</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  149</span>                                                              {</div>
<div class="line"><span class="lineno">  150</span>  node-&gt;<a class="code hl_variable" href="structxmem__pool__block.html#a6875d9d46a942427f1377f5d050d0ad0">block_size</a> = 0;</div>
<div class="line"><span class="lineno">  151</span>  node-&gt;<a class="code hl_variable" href="structxmem__pool__block.html#a6787e0a646a2aaba653ecce38caa94eb">next</a> = NULL;</div>
<div class="line"><span class="lineno">  152</span>  node-&gt;<a class="code hl_variable" href="structxmem__pool__block.html#ac5d567af757e520ea648f80f87a3e062">start</a> = NULL;</div>
<div class="line"><span class="lineno">  153</span> </div>
<div class="line"><span class="lineno">  154</span>  <span class="keywordflow">if</span> (<a class="code hl_variable" href="#a8f4c2f28bc57149c38953ca0fd26c40a">_free_block_ptr</a> &amp;&amp; <a class="code hl_variable" href="#afb0f258f67a7d6eac5ef90e6987ead30">_free_block_ptr_end</a>) {</div>
<div class="line"><span class="lineno">  155</span>    <a class="code hl_variable" href="#afb0f258f67a7d6eac5ef90e6987ead30">_free_block_ptr_end</a>-&gt;<a class="code hl_variable" href="structxmem__pool__block.html#a6787e0a646a2aaba653ecce38caa94eb">next</a> = node;</div>
<div class="line"><span class="lineno">  156</span>    <a class="code hl_variable" href="#afb0f258f67a7d6eac5ef90e6987ead30">_free_block_ptr_end</a> = node;</div>
<div class="line"><span class="lineno">  157</span>  } <span class="keywordflow">else</span> {</div>
<div class="line"><span class="lineno">  158</span>    <a class="code hl_variable" href="#a8f4c2f28bc57149c38953ca0fd26c40a">_free_block_ptr</a> = <a class="code hl_variable" href="#afb0f258f67a7d6eac5ef90e6987ead30">_free_block_ptr_end</a> = node;</div>
<div class="line"><span class="lineno">  159</span>  }</div>
<div class="line"><span class="lineno">  160</span>}</div>
</div><!-- fragment -->
</div>
</div>
<a id="a85b9553a877ffa7cca6334817b968984" name="a85b9553a877ffa7cca6334817b968984"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a85b9553a877ffa7cca6334817b968984">&#9670;&#160;</a></span>_xmem_count_free_blocks()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int _xmem_count_free_blocks </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structxmem__pool.html">xmem_pool</a> *</td>          <td class="paramname"><span class="paramname"><em>pool</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="xmempool_8c_source.html#l00162">162</a> of file <a class="el" href="xmempool_8c_source.html">xmempool.c</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  162</span>                                                           {</div>
<div class="line"><span class="lineno">  163</span>  <a class="code hl_struct" href="structxmem__pool__block.html">xmem_pool_block</a>* block;</div>
<div class="line"><span class="lineno">  164</span>  <span class="keywordtype">int</span> count;</div>
<div class="line"><span class="lineno">  165</span> </div>
<div class="line"><span class="lineno">  166</span>  <span class="keywordflow">if</span> (!pool-&gt;<a class="code hl_variable" href="structxmem__pool.html#ae129fe4209627a82f7319037b60c5612">free_blocks</a>) <span class="keywordflow">return</span> 0;</div>
<div class="line"><span class="lineno">  167</span>  block = pool-&gt;<a class="code hl_variable" href="structxmem__pool.html#ae129fe4209627a82f7319037b60c5612">free_blocks</a>;</div>
<div class="line"><span class="lineno">  168</span>  count = 1;</div>
<div class="line"><span class="lineno">  169</span> </div>
<div class="line"><span class="lineno">  170</span>  <span class="keywordflow">while</span> (block != pool-&gt;<a class="code hl_variable" href="structxmem__pool.html#a59becc4c6a86620a973ef5d812d35570">free_blocks_tail</a>) {</div>
<div class="line"><span class="lineno">  171</span>    count++;</div>
<div class="line"><span class="lineno">  172</span>    block = block-&gt;<a class="code hl_variable" href="structxmem__pool__block.html#a6787e0a646a2aaba653ecce38caa94eb">next</a>;</div>
<div class="line"><span class="lineno">  173</span>  }</div>
<div class="line"><span class="lineno">  174</span> </div>
<div class="line"><span class="lineno">  175</span>  <span class="keywordflow">return</span> count;</div>
<div class="line"><span class="lineno">  176</span>}</div>
</div><!-- fragment -->
</div>
</div>
<a id="a017124d3c7e4814c6502796b39509722" name="a017124d3c7e4814c6502796b39509722"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a017124d3c7e4814c6502796b39509722">&#9670;&#160;</a></span>size_count_with_4()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint32_t size_count_with_4 </td>
          <td>(</td>
          <td class="paramtype">uint32_t</td>          <td class="paramname"><span class="paramname"><em>size</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="xmempool_8c_source.html#l00058">58</a> of file <a class="el" href="xmempool_8c_source.html">xmempool.c</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">   58</span>                                          {</div>
<div class="line"><span class="lineno">   59</span>  <span class="keywordflow">if</span> (size % 4 == 0) {</div>
<div class="line"><span class="lineno">   60</span>    <span class="keywordflow">return</span> size;</div>
<div class="line"><span class="lineno">   61</span>  } <span class="keywordflow">else</span> {</div>
<div class="line"><span class="lineno">   62</span>    <span class="keywordflow">return</span> size + (4 - size % 4);</div>
<div class="line"><span class="lineno">   63</span>  }</div>
<div class="line"><span class="lineno">   64</span>}</div>
</div><!-- fragment -->
</div>
</div>
<a id="a7ae69189c42c655bb25273f6f255c7a0" name="a7ae69189c42c655bb25273f6f255c7a0"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7ae69189c42c655bb25273f6f255c7a0">&#9670;&#160;</a></span>xmem_alloc()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">char * xmem_alloc </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="xmempool_8h.html#a3fce2e8b5d5306b76afb7870c053a664">xmem_pool_handle</a></td>          <td class="paramname"><span class="paramname"><em>handle</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Allocate a block from the memory pool. </p>
<p>This function returns a pointer to a free block from the pool. If the current pool is full, it automatically creates and chains a new pool. The allocated block is always zero-initialized.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">handle</td><td>Handle to the pool to allocate from </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Pointer to the allocated block, or NULL if allocation failed </dd></dl>

<p class="definition">Definition at line <a class="el" href="xmempool_8c_source.html#l00341">341</a> of file <a class="el" href="xmempool_8c_source.html">xmempool.c</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  341</span>                                          {</div>
<div class="line"><span class="lineno">  342</span>  <span class="keyword">static</span> uint32_t pool_element_size = <span class="keyword">sizeof</span>(<a class="code hl_struct" href="structxmem__pool.html">xmem_pool</a>);</div>
<div class="line"><span class="lineno">  343</span>  <a class="code hl_struct" href="structxmem__pool.html">xmem_pool</a>* pool = (<a class="code hl_struct" href="structxmem__pool.html">xmem_pool</a>*)handle;</div>
<div class="line"><span class="lineno">  344</span>  <a class="code hl_struct" href="structxmem__pool.html">xmem_pool</a> temp_pool;</div>
<div class="line"><span class="lineno">  345</span>  <a class="code hl_struct" href="structxmem__pool__block.html">xmem_pool_block</a>* block;</div>
<div class="line"><span class="lineno">  346</span>  <span class="keywordtype">char</span>* space;</div>
<div class="line"><span class="lineno">  347</span> </div>
<div class="line"><span class="lineno">  348</span>  <span class="comment">// If no more free blocks, create a new pool</span></div>
<div class="line"><span class="lineno">  349</span>  <span class="keywordflow">if</span> (!pool-&gt;<a class="code hl_variable" href="structxmem__pool.html#ae129fe4209627a82f7319037b60c5612">free_blocks</a>) {</div>
<div class="line"><span class="lineno">  350</span>    <a class="code hl_struct" href="structxmem__pool.html">xmem_pool</a>* new_pool =</div>
<div class="line"><span class="lineno">  351</span>        (<a class="code hl_struct" href="structxmem__pool.html">xmem_pool</a>*)<a class="code hl_function" href="#af59c61c4e698c8ad8a8fcdd234212522">_create_pool</a>(pool-&gt;<a class="code hl_variable" href="structxmem__pool.html#a999a5e9a0ebafb774fc33f06ff014d12">block_size</a>, pool-&gt;<a class="code hl_variable" href="structxmem__pool.html#af1fb94eb5efcbd8f20bc0e4b97629ff6">next_alloc_length</a>);</div>
<div class="line"><span class="lineno">  352</span> </div>
<div class="line"><span class="lineno">  353</span>    <span class="keywordflow">if</span> (!new_pool) {</div>
<div class="line"><span class="lineno">  354</span>      <span class="keywordflow">return</span> 0;</div>
<div class="line"><span class="lineno">  355</span>    }</div>
<div class="line"><span class="lineno">  356</span> </div>
<div class="line"><span class="lineno">  357</span>    <span class="comment">// Swap the new pool with the current one</span></div>
<div class="line"><span class="lineno">  358</span>    memcpy(&amp;temp_pool, pool, pool_element_size);</div>
<div class="line"><span class="lineno">  359</span>    memcpy(pool, new_pool, pool_element_size);</div>
<div class="line"><span class="lineno">  360</span>    memcpy(new_pool, &amp;temp_pool, pool_element_size);</div>
<div class="line"><span class="lineno">  361</span> </div>
<div class="line"><span class="lineno">  362</span>    pool-&gt;<a class="code hl_variable" href="structxmem__pool.html#a1929a43391b4a96acaba99885077f1bc">next</a> = new_pool;</div>
<div class="line"><span class="lineno">  363</span>  }</div>
<div class="line"><span class="lineno">  364</span> </div>
<div class="line"><span class="lineno">  365</span>  <span class="comment">// Allocate the first free block</span></div>
<div class="line"><span class="lineno">  366</span>  block = pool-&gt;<a class="code hl_variable" href="structxmem__pool.html#ae129fe4209627a82f7319037b60c5612">free_blocks</a>;</div>
<div class="line"><span class="lineno">  367</span>  pool-&gt;<a class="code hl_variable" href="structxmem__pool.html#ae129fe4209627a82f7319037b60c5612">free_blocks</a> = block-&gt;<a class="code hl_variable" href="structxmem__pool__block.html#a6787e0a646a2aaba653ecce38caa94eb">next</a>;</div>
<div class="line"><span class="lineno">  368</span>  space = block-&gt;<a class="code hl_variable" href="structxmem__pool__block.html#ac5d567af757e520ea648f80f87a3e062">start</a>;</div>
<div class="line"><span class="lineno">  369</span> </div>
<div class="line"><span class="lineno">  370</span>  <span class="keywordflow">if</span> (!pool-&gt;<a class="code hl_variable" href="structxmem__pool.html#ae129fe4209627a82f7319037b60c5612">free_blocks</a>) pool-&gt;<a class="code hl_variable" href="structxmem__pool.html#a59becc4c6a86620a973ef5d812d35570">free_blocks_tail</a> = 0;</div>
<div class="line"><span class="lineno">  371</span> </div>
<div class="line"><span class="lineno">  372</span>  <span class="comment">// Initialize allocated space and recover the block node</span></div>
<div class="line"><span class="lineno">  373</span>  memset(space, 0, block-&gt;<a class="code hl_variable" href="structxmem__pool__block.html#a6875d9d46a942427f1377f5d050d0ad0">block_size</a>);</div>
<div class="line"><span class="lineno">  374</span>  <a class="code hl_function" href="#a6c540fd1d956b8b2d1cd96186438d037">_recover_block_node</a>(block);</div>
<div class="line"><span class="lineno">  375</span> </div>
<div class="line"><span class="lineno">  376</span>  <span class="keywordflow">return</span> space;</div>
<div class="line"><span class="lineno">  377</span>}</div>
<div class="ttc" id="axmempool_8c_html_af59c61c4e698c8ad8a8fcdd234212522"><div class="ttname"><a href="#af59c61c4e698c8ad8a8fcdd234212522">_create_pool</a></div><div class="ttdeci">xmem_pool_handle _create_pool(uint32_t block_size, uint32_t block_count)</div><div class="ttdoc">Create a new memory pool.</div><div class="ttdef"><b>Definition</b> <a href="xmempool_8c_source.html#l00189">xmempool.c:189</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a3ec7cd7c84271a41ae99ba6a727b4a61" name="a3ec7cd7c84271a41ae99ba6a727b4a61"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3ec7cd7c84271a41ae99ba6a727b4a61">&#9670;&#160;</a></span>xmem_clean_up()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void xmem_clean_up </td>
          <td>(</td>
          <td class="paramname"><span class="paramname"><em></em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Clean up global resources used by xmempool. </p>
<p>This function frees all global resources used by the xmempool system, particularly the memory used for managing block nodes. It should be called when the xmempool system is no longer needed. </p>

<p class="definition">Definition at line <a class="el" href="xmempool_8c_source.html#l00408">408</a> of file <a class="el" href="xmempool_8c_source.html">xmempool.c</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  408</span>                     {</div>
<div class="line"><span class="lineno">  409</span>  <a class="code hl_struct" href="structxmem__pool__block.html">xmem_pool_block</a>* blk = <a class="code hl_variable" href="#a8f4c2f28bc57149c38953ca0fd26c40a">_free_block_ptr</a>;</div>
<div class="line"><span class="lineno">  410</span>  <a class="code hl_struct" href="structxmem__pool__block.html">xmem_pool_block</a>* start = 0;</div>
<div class="line"><span class="lineno">  411</span>  <a class="code hl_struct" href="structxmem__pool__block.html">xmem_pool_block</a>* end = 0;</div>
<div class="line"><span class="lineno">  412</span> </div>
<div class="line"><span class="lineno">  413</span>  <span class="comment">// Reorganize the free block list</span></div>
<div class="line"><span class="lineno">  414</span>  <span class="keywordflow">while</span> (blk != 0) {</div>
<div class="line"><span class="lineno">  415</span>    <span class="keywordflow">if</span> (blk-&gt;<a class="code hl_variable" href="structxmem__pool__block.html#ac4ac1808fc99088927d53c5379d6aeb4">is_block_start</a>) {</div>
<div class="line"><span class="lineno">  416</span>      <span class="keywordflow">if</span> (end) {</div>
<div class="line"><span class="lineno">  417</span>        end-&gt;<a class="code hl_variable" href="structxmem__pool__block.html#a6787e0a646a2aaba653ecce38caa94eb">next</a> = blk;</div>
<div class="line"><span class="lineno">  418</span>      } <span class="keywordflow">else</span> {</div>
<div class="line"><span class="lineno">  419</span>        start = blk;</div>
<div class="line"><span class="lineno">  420</span>      }</div>
<div class="line"><span class="lineno">  421</span>      end = blk;</div>
<div class="line"><span class="lineno">  422</span>    }</div>
<div class="line"><span class="lineno">  423</span>    blk = blk-&gt;<a class="code hl_variable" href="structxmem__pool__block.html#a6787e0a646a2aaba653ecce38caa94eb">next</a>;</div>
<div class="line"><span class="lineno">  424</span>  }</div>
<div class="line"><span class="lineno">  425</span>  <span class="keywordflow">if</span> (end) end-&gt;<a class="code hl_variable" href="structxmem__pool__block.html#a6787e0a646a2aaba653ecce38caa94eb">next</a> = 0;</div>
<div class="line"><span class="lineno">  426</span> </div>
<div class="line"><span class="lineno">  427</span>  <span class="comment">// Free all allocated block nodes</span></div>
<div class="line"><span class="lineno">  428</span>  blk = start;</div>
<div class="line"><span class="lineno">  429</span>  <span class="keywordflow">while</span> (blk != 0) {</div>
<div class="line"><span class="lineno">  430</span>    end = blk-&gt;<a class="code hl_variable" href="structxmem__pool__block.html#a6787e0a646a2aaba653ecce38caa94eb">next</a>;  <span class="comment">// Temporary variable for the next block</span></div>
<div class="line"><span class="lineno">  431</span>    free(blk);</div>
<div class="line"><span class="lineno">  432</span>    blk = end;</div>
<div class="line"><span class="lineno">  433</span>  }</div>
<div class="line"><span class="lineno">  434</span> </div>
<div class="line"><span class="lineno">  435</span>  <span class="comment">// Reset global pointers</span></div>
<div class="line"><span class="lineno">  436</span>  <a class="code hl_variable" href="#a8f4c2f28bc57149c38953ca0fd26c40a">_free_block_ptr</a> = <a class="code hl_variable" href="#afb0f258f67a7d6eac5ef90e6987ead30">_free_block_ptr_end</a> = 0;</div>
<div class="line"><span class="lineno">  437</span>}</div>
</div><!-- fragment -->
</div>
</div>
<a id="afecd089ea446a199bf591cd94e7372ce" name="afecd089ea446a199bf591cd94e7372ce"></a>
<h2 class="memtitle"><span class="permalink"><a href="#afecd089ea446a199bf591cd94e7372ce">&#9670;&#160;</a></span>xmem_create_pool()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="xmempool_8h.html#a3fce2e8b5d5306b76afb7870c053a664">xmem_pool_handle</a> xmem_create_pool </td>
          <td>(</td>
          <td class="paramtype">unsigned int</td>          <td class="paramname"><span class="paramname"><em>block_size</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="xmempool_8c_source.html#l00292">292</a> of file <a class="el" href="xmempool_8c_source.html">xmempool.c</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  292</span>                                                           {</div>
<div class="line"><span class="lineno">  293</span><span class="preprocessor">#ifndef _WIN32</span></div>
<div class="line"><span class="lineno">  294</span>  <span class="comment">// Initialize page size for non-Windows systems</span></div>
<div class="line"><span class="lineno">  295</span>  <span class="keywordflow">if</span> (<a class="code hl_variable" href="#a652a9b8a5157e94e718f5d5283008fc4">_xmem_page_size</a> == 0) {</div>
<div class="line"><span class="lineno">  296</span>    <a class="code hl_variable" href="#a652a9b8a5157e94e718f5d5283008fc4">_xmem_page_size</a> = getpagesize();</div>
<div class="line"><span class="lineno">  297</span>  }</div>
<div class="line"><span class="lineno">  298</span><span class="preprocessor">#endif</span></div>
<div class="line"><span class="lineno">  299</span> </div>
<div class="line"><span class="lineno">  300</span><span class="preprocessor">#ifdef XMEM_DBG</span></div>
<div class="line"><span class="lineno">  301</span>  <span class="comment">// Debug mode: create pool and print creation message</span></div>
<div class="line"><span class="lineno">  302</span>  <span class="keywordtype">char</span>* pool = <a class="code hl_function" href="#af59c61c4e698c8ad8a8fcdd234212522">_create_pool</a>(block_size, <a class="code hl_define" href="#a677cec2d7bc9da83b43cbb8d634e6f7f">MIN_ALLOC_LENGTH</a>);</div>
<div class="line"><span class="lineno">  303</span>  printf(<span class="stringliteral">&quot;A new pool of [%d] is created!&quot;</span>, block_size);</div>
<div class="line"><span class="lineno">  304</span>  <span class="keywordflow">return</span> pool;</div>
<div class="line"><span class="lineno">  305</span><span class="preprocessor">#endif</span></div>
<div class="line"><span class="lineno">  306</span> </div>
<div class="line"><span class="lineno">  307</span>  <span class="comment">// Normal mode: create pool with minimum allocation length</span></div>
<div class="line"><span class="lineno">  308</span>  <span class="keywordflow">return</span> <a class="code hl_function" href="#af59c61c4e698c8ad8a8fcdd234212522">_create_pool</a>(block_size, <a class="code hl_define" href="#a677cec2d7bc9da83b43cbb8d634e6f7f">MIN_ALLOC_LENGTH</a>);</div>
<div class="line"><span class="lineno">  309</span>}</div>
<div class="ttc" id="axmempool_8c_html_a677cec2d7bc9da83b43cbb8d634e6f7f"><div class="ttname"><a href="#a677cec2d7bc9da83b43cbb8d634e6f7f">MIN_ALLOC_LENGTH</a></div><div class="ttdeci">#define MIN_ALLOC_LENGTH</div><div class="ttdef"><b>Definition</b> <a href="xmempool_8c_source.html#l00049">xmempool.c:49</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="aee79a7d27db17f354fe66b49871aa223" name="aee79a7d27db17f354fe66b49871aa223"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aee79a7d27db17f354fe66b49871aa223">&#9670;&#160;</a></span>xmem_destroy_pool()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void xmem_destroy_pool </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="xmempool_8h.html#a3fce2e8b5d5306b76afb7870c053a664">xmem_pool_handle</a></td>          <td class="paramname"><span class="paramname"><em>pool</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Destroy a memory pool and free all associated resources. </p>
<p>This function frees all memory associated with the pool, including all chained pools and their blocks. It also recovers all block nodes used for managing free blocks.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">pool</td><td>Handle to the pool to be destroyed </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="xmempool_8c_source.html#l00311">311</a> of file <a class="el" href="xmempool_8c_source.html">xmempool.c</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  311</span>                                                {</div>
<div class="line"><span class="lineno">  312</span>  <a class="code hl_struct" href="structxmem__pool.html">xmem_pool</a>* pool = (<a class="code hl_struct" href="structxmem__pool.html">xmem_pool</a>*)handle;</div>
<div class="line"><span class="lineno">  313</span>  <a class="code hl_struct" href="structxmem__pool.html">xmem_pool</a>* next_pool;</div>
<div class="line"><span class="lineno">  314</span> </div>
<div class="line"><span class="lineno">  315</span>  <span class="keywordflow">if</span> (!handle) <span class="keywordflow">return</span>;</div>
<div class="line"><span class="lineno">  316</span> </div>
<div class="line"><span class="lineno">  317</span>  <span class="comment">// Iterate through all pools in the chain</span></div>
<div class="line"><span class="lineno">  318</span>  <span class="keywordflow">while</span> (pool) {</div>
<div class="line"><span class="lineno">  319</span>    <span class="comment">// Free the memory space allocated for blocks</span></div>
<div class="line"><span class="lineno">  320</span>    free(pool-&gt;<a class="code hl_variable" href="structxmem__pool.html#a12120dc7808ef4f91d861eae6f6d29f1">start</a>);</div>
<div class="line"><span class="lineno">  321</span> </div>
<div class="line"><span class="lineno">  322</span>    <span class="comment">// For the first pool, recover all free block nodes</span></div>
<div class="line"><span class="lineno">  323</span>    <span class="keywordflow">if</span> (pool == (<a class="code hl_struct" href="structxmem__pool.html">xmem_pool</a>*)handle) {</div>
<div class="line"><span class="lineno">  324</span>      <a class="code hl_struct" href="structxmem__pool__block.html">xmem_pool_block</a>* block = pool-&gt;<a class="code hl_variable" href="structxmem__pool.html#ae129fe4209627a82f7319037b60c5612">free_blocks</a>;</div>
<div class="line"><span class="lineno">  325</span>      <a class="code hl_struct" href="structxmem__pool__block.html">xmem_pool_block</a>* next_block;</div>
<div class="line"><span class="lineno">  326</span> </div>
<div class="line"><span class="lineno">  327</span>      <span class="keywordflow">while</span> (block) {</div>
<div class="line"><span class="lineno">  328</span>        next_block = block-&gt;<a class="code hl_variable" href="structxmem__pool__block.html#a6787e0a646a2aaba653ecce38caa94eb">next</a>;</div>
<div class="line"><span class="lineno">  329</span>        <a class="code hl_function" href="#a6c540fd1d956b8b2d1cd96186438d037">_recover_block_node</a>(block);</div>
<div class="line"><span class="lineno">  330</span>        block = next_block;</div>
<div class="line"><span class="lineno">  331</span>      }</div>
<div class="line"><span class="lineno">  332</span>    }</div>
<div class="line"><span class="lineno">  333</span> </div>
<div class="line"><span class="lineno">  334</span>    <span class="comment">// Move to the next pool</span></div>
<div class="line"><span class="lineno">  335</span>    next_pool = pool-&gt;<a class="code hl_variable" href="structxmem__pool.html#a1929a43391b4a96acaba99885077f1bc">next</a>;</div>
<div class="line"><span class="lineno">  336</span>    free(pool);</div>
<div class="line"><span class="lineno">  337</span>    pool = next_pool;</div>
<div class="line"><span class="lineno">  338</span>  }</div>
<div class="line"><span class="lineno">  339</span>}</div>
</div><!-- fragment -->
</div>
</div>
<a id="aa472911be7f636d75cc749c58043202e" name="aa472911be7f636d75cc749c58043202e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa472911be7f636d75cc749c58043202e">&#9670;&#160;</a></span>xmem_free()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int xmem_free </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="xmempool_8h.html#a3fce2e8b5d5306b76afb7870c053a664">xmem_pool_handle</a></td>          <td class="paramname"><span class="paramname"><em>handle</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *</td>          <td class="paramname"><span class="paramname"><em>pointer</em></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Free a block back to the memory pool. </p>
<p>This function returns a block to the free list of the first pool in the chain. It does not actually free memory, but makes the block available for future allocations.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">handle</td><td>Handle to the pool </td></tr>
    <tr><td class="paramname">pointer</td><td>Pointer to the block to be freed </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>1 if successful, 0 if failed (e.g., if no free block nodes are available) </dd></dl>

<p class="definition">Definition at line <a class="el" href="xmempool_8c_source.html#l00379">379</a> of file <a class="el" href="xmempool_8c_source.html">xmempool.c</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  379</span>                                                      {</div>
<div class="line"><span class="lineno">  380</span>  <a class="code hl_struct" href="structxmem__pool.html">xmem_pool</a>* pool = (<a class="code hl_struct" href="structxmem__pool.html">xmem_pool</a>*)handle;</div>
<div class="line"><span class="lineno">  381</span> </div>
<div class="line"><span class="lineno">  382</span>  <span class="comment">// Get a new block node</span></div>
<div class="line"><span class="lineno">  383</span>  <a class="code hl_struct" href="structxmem__pool__block.html">xmem_pool_block</a>* block = <a class="code hl_function" href="#af159eb155ecc721f7b0d93a64fee2532">_get_next_block_node</a>();</div>
<div class="line"><span class="lineno">  384</span>  <span class="keywordflow">if</span> (!block) {</div>
<div class="line"><span class="lineno">  385</span>    <span class="keywordflow">return</span> 0;</div>
<div class="line"><span class="lineno">  386</span>  }</div>
<div class="line"><span class="lineno">  387</span> </div>
<div class="line"><span class="lineno">  388</span>  <span class="comment">// Initialize the new block and add it to the free list</span></div>
<div class="line"><span class="lineno">  389</span>  block-&gt;<a class="code hl_variable" href="structxmem__pool__block.html#a6875d9d46a942427f1377f5d050d0ad0">block_size</a> = pool-&gt;<a class="code hl_variable" href="structxmem__pool.html#a999a5e9a0ebafb774fc33f06ff014d12">block_size</a>;</div>
<div class="line"><span class="lineno">  390</span>  block-&gt;<a class="code hl_variable" href="structxmem__pool__block.html#ac5d567af757e520ea648f80f87a3e062">start</a> = pointer;</div>
<div class="line"><span class="lineno">  391</span>  block-&gt;<a class="code hl_variable" href="structxmem__pool__block.html#a6787e0a646a2aaba653ecce38caa94eb">next</a> = 0;</div>
<div class="line"><span class="lineno">  392</span> </div>
<div class="line"><span class="lineno">  393</span>  <span class="keywordflow">if</span> (!pool-&gt;<a class="code hl_variable" href="structxmem__pool.html#ae129fe4209627a82f7319037b60c5612">free_blocks</a> &amp;&amp; !pool-&gt;<a class="code hl_variable" href="structxmem__pool.html#a59becc4c6a86620a973ef5d812d35570">free_blocks_tail</a>) {</div>
<div class="line"><span class="lineno">  394</span>    pool-&gt;<a class="code hl_variable" href="structxmem__pool.html#ae129fe4209627a82f7319037b60c5612">free_blocks</a> = pool-&gt;<a class="code hl_variable" href="structxmem__pool.html#a59becc4c6a86620a973ef5d812d35570">free_blocks_tail</a> = block;</div>
<div class="line"><span class="lineno">  395</span>    <span class="keywordflow">return</span> 1;</div>
<div class="line"><span class="lineno">  396</span>  }</div>
<div class="line"><span class="lineno">  397</span> </div>
<div class="line"><span class="lineno">  398</span>  pool-&gt;<a class="code hl_variable" href="structxmem__pool.html#a59becc4c6a86620a973ef5d812d35570">free_blocks_tail</a>-&gt;<a class="code hl_variable" href="structxmem__pool__block.html#a6787e0a646a2aaba653ecce38caa94eb">next</a> = block;</div>
<div class="line"><span class="lineno">  399</span>  pool-&gt;<a class="code hl_variable" href="structxmem__pool.html#a59becc4c6a86620a973ef5d812d35570">free_blocks_tail</a> = block;</div>
<div class="line"><span class="lineno">  400</span> </div>
<div class="line"><span class="lineno">  401</span>  <span class="keywordflow">return</span> 1;</div>
<div class="line"><span class="lineno">  402</span>}</div>
</div><!-- fragment -->
</div>
</div>
<a id="a59bdcd8796f1c2ea3b19b1fe187db069" name="a59bdcd8796f1c2ea3b19b1fe187db069"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a59bdcd8796f1c2ea3b19b1fe187db069">&#9670;&#160;</a></span>xmem_init()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void xmem_init </td>
          <td>(</td>
          <td class="paramname"><span class="paramname"><em></em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="xmempool_8c_source.html#l00404">404</a> of file <a class="el" href="xmempool_8c_source.html">xmempool.c</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  404</span>                 {</div>
<div class="line"><span class="lineno">  405</span>  <span class="comment">// Placeholder for potential initialization code</span></div>
<div class="line"><span class="lineno">  406</span>}</div>
</div><!-- fragment -->
</div>
</div>
<a id="a4a1008d2aa511fb0e5144ddb916b4a3e" name="a4a1008d2aa511fb0e5144ddb916b4a3e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4a1008d2aa511fb0e5144ddb916b4a3e">&#9670;&#160;</a></span>xmem_print_info()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void xmem_print_info </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="xmempool_8h.html#a3fce2e8b5d5306b76afb7870c053a664">xmem_pool_handle</a></td>          <td class="paramname"><span class="paramname"><em>pool</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Print information about the memory pool. </p>
<p>This function prints detailed information about each pool in the chain, including its size, block count, memory range, and number of free blocks.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">pool</td><td>Handle to the pool </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="xmempool_8c_source.html#l00264">264</a> of file <a class="el" href="xmempool_8c_source.html">xmempool.c</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  264</span>                                             {</div>
<div class="line"><span class="lineno">  265</span>  <a class="code hl_struct" href="structxmem__pool.html">xmem_pool</a>* pool = (<a class="code hl_struct" href="structxmem__pool.html">xmem_pool</a>*)_pool;</div>
<div class="line"><span class="lineno">  266</span>  <span class="keywordtype">int</span> pool_id = 0;</div>
<div class="line"><span class="lineno">  267</span> </div>
<div class="line"><span class="lineno">  268</span>  <span class="keywordflow">if</span> (!_pool) <span class="keywordflow">return</span>;</div>
<div class="line"><span class="lineno">  269</span> </div>
<div class="line"><span class="lineno">  270</span>  <span class="keywordflow">while</span> (pool) {</div>
<div class="line"><span class="lineno">  271</span>    printf(<span class="stringliteral">&quot;----- POOL OF SIZE [%.4d] -----\n&quot;</span>, pool-&gt;<a class="code hl_variable" href="structxmem__pool.html#a999a5e9a0ebafb774fc33f06ff014d12">block_size</a>);</div>
<div class="line"><span class="lineno">  272</span>    printf(<span class="stringliteral">&quot;  + id: %d\n&quot;</span>, pool_id++);</div>
<div class="line"><span class="lineno">  273</span>    printf(<span class="stringliteral">&quot;  + count: %d\n&quot;</span>, pool-&gt;<a class="code hl_variable" href="structxmem__pool.html#a5c4ccb1a0fd0de6808e27a527d09c966">block_count</a>);</div>
<div class="line"><span class="lineno">  274</span> </div>
<div class="line"><span class="lineno">  275</span><span class="preprocessor">#pragma GCC diagnostic push</span></div>
<div class="line"><span class="lineno">  276</span><span class="preprocessor">#pragma GCC diagnostic ignored &quot;-Wpointer-to-int-cast&quot;</span></div>
<div class="line"><span class="lineno">  277</span>    printf(<span class="stringliteral">&quot;  + spaces: [0x%.8X, 0x%.8X)\n&quot;</span>,</div>
<div class="line"><span class="lineno">  278</span>           (<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span>)pool-&gt;<a class="code hl_variable" href="structxmem__pool.html#a12120dc7808ef4f91d861eae6f6d29f1">start</a>,</div>
<div class="line"><span class="lineno">  279</span>           (<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span>)pool-&gt;<a class="code hl_variable" href="structxmem__pool.html#aea3ab4393ae4b652f106b866e76fff06">end</a>);</div>
<div class="line"><span class="lineno">  280</span><span class="preprocessor">#pragma GCC diagnostic pop</span></div>
<div class="line"><span class="lineno">  281</span> </div>
<div class="line"><span class="lineno">  282</span>    <span class="keywordflow">if</span> (pool_id == 1) {</div>
<div class="line"><span class="lineno">  283</span>      printf(<span class="stringliteral">&quot;  + free blocks: %d\n&quot;</span>, <a class="code hl_function" href="#a85b9553a877ffa7cca6334817b968984">_xmem_count_free_blocks</a>(pool));</div>
<div class="line"><span class="lineno">  284</span>    } <span class="keywordflow">else</span> {</div>
<div class="line"><span class="lineno">  285</span>      printf(<span class="stringliteral">&quot;  + free blocks: -\n&quot;</span>);</div>
<div class="line"><span class="lineno">  286</span>    }</div>
<div class="line"><span class="lineno">  287</span> </div>
<div class="line"><span class="lineno">  288</span>    pool = pool-&gt;<a class="code hl_variable" href="structxmem__pool.html#a1929a43391b4a96acaba99885077f1bc">next</a>;</div>
<div class="line"><span class="lineno">  289</span>  }</div>
<div class="line"><span class="lineno">  290</span>}</div>
<div class="ttc" id="axmempool_8c_html_a85b9553a877ffa7cca6334817b968984"><div class="ttname"><a href="#a85b9553a877ffa7cca6334817b968984">_xmem_count_free_blocks</a></div><div class="ttdeci">static int _xmem_count_free_blocks(xmem_pool *pool)</div><div class="ttdef"><b>Definition</b> <a href="xmempool_8c_source.html#l00162">xmempool.c:162</a></div></div>
</div><!-- fragment -->
</div>
</div>
<h2 class="groupheader">Variable Documentation</h2>
<a id="a96a49339cc47ea3c27ba0dae822b04df" name="a96a49339cc47ea3c27ba0dae822b04df"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a96a49339cc47ea3c27ba0dae822b04df">&#9670;&#160;</a></span>_block_size</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">uint32_t _block_size = sizeof(<a class="el" href="structxmem__pool__block.html">xmem_pool_block</a>)</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="xmempool_8c_source.html#l00056">56</a> of file <a class="el" href="xmempool_8c_source.html">xmempool.c</a>.</p>

</div>
</div>
<a id="a8f4c2f28bc57149c38953ca0fd26c40a" name="a8f4c2f28bc57149c38953ca0fd26c40a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8f4c2f28bc57149c38953ca0fd26c40a">&#9670;&#160;</a></span>_free_block_ptr</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="structxmem__pool__block.html">xmem_pool_block</a>* _free_block_ptr = 0</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="xmempool_8c_source.html#l00053">53</a> of file <a class="el" href="xmempool_8c_source.html">xmempool.c</a>.</p>

</div>
</div>
<a id="afb0f258f67a7d6eac5ef90e6987ead30" name="afb0f258f67a7d6eac5ef90e6987ead30"></a>
<h2 class="memtitle"><span class="permalink"><a href="#afb0f258f67a7d6eac5ef90e6987ead30">&#9670;&#160;</a></span>_free_block_ptr_end</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="structxmem__pool__block.html">xmem_pool_block</a>* _free_block_ptr_end = 0</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="xmempool_8c_source.html#l00054">54</a> of file <a class="el" href="xmempool_8c_source.html">xmempool.c</a>.</p>

</div>
</div>
<a id="a652a9b8a5157e94e718f5d5283008fc4" name="a652a9b8a5157e94e718f5d5283008fc4"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a652a9b8a5157e94e718f5d5283008fc4">&#9670;&#160;</a></span>_xmem_page_size</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">int _xmem_page_size = 0</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="xmempool_8c_source.html#l00055">55</a> of file <a class="el" href="xmempool_8c_source.html">xmempool.c</a>.</p>

</div>
</div>
<a id="a2f0f93b2aa138808bc0f2c5c2bce09bc" name="a2f0f93b2aa138808bc0f2c5c2bce09bc"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2f0f93b2aa138808bc0f2c5c2bce09bc">&#9670;&#160;</a></span>_xmem_pool_next_alloc_block_node_count</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">uint32_t _xmem_pool_next_alloc_block_node_count</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<b>Initial value:</b><div class="fragment"><div class="line">=</div>
<div class="line">    (1024)</div>
</div><!-- fragment -->
<p class="definition">Definition at line <a class="el" href="xmempool_8c_source.html#l00051">51</a> of file <a class="el" href="xmempool_8c_source.html">xmempool.c</a>.</p>

</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.12.0
</small></address>
</div><!-- doc-content -->
</body>
</html>
