<!DOCTYPE html>
<html lang="en-US">

<head>
    <title>Performance Report - xmempool</title>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <script>
        var mac = {
            "./perf_xmem": [
            {
                "times": 10,
                "alloc": 8524,
                "free": 274.7,
                "total": 22086.4
            },
            {
                "times": 100,
                "alloc": 9143.5,
                "free": 1222.6,
                "total": 20196.5
            },
            {
                "times": 1000,
                "alloc": 54111.4,
                "free": 11856.8,
                "total": 79467.2
            },
            {
                "times": 10000,
                "alloc": 966818.4,
                "free": 415574.3,
                "total": 1526970.3
            },
            {
                "times": 100000,
                "alloc": 8699388,
                "free": 4099070.8,
                "total": 14196120.4
            },
            {
                "times": 1000000,
                "alloc": 85837922.2,
                "free": 36005187,
                "total": 135477697.9
            },
            {
                "times": 10000000,
                "alloc": 1097308611.2,
                "free": 521264073.1,
                "total": 1903542243.9
            },
            {
                "times": 10000000,
                "alloc": 1186550055.2,
                "free": 604603569.3,
                "total": 2081353016.1
            }],
            "./perf_alloc": [
            {
                "times": 10,
                "alloc": 5282,
                "free": 5520.7,
                "total": 10843.2
            },
            {
                "times": 100,
                "alloc": 16750.3,
                "free": 28802.9,
                "total": 45595.5
            },
            {
                "times": 1000,
                "alloc": 126718.8,
                "free": 220003.4,
                "total": 346764.2
            },
            {
                "times": 10000,
                "alloc": 1271442.7,
                "free": 2093563.5,
                "total": 3365048.1
            },
            {
                "times": 100000,
                "alloc": 13081383.4,
                "free": 23242086.3,
                "total": 36323508.3
            },
            {
                "times": 1000000,
                "alloc": 133752463.7,
                "free": 259788391.1,
                "total": 393540900.3
            },
            {
                "times": 10000000,
                "alloc": 1434226234.4,
                "free": 2604407105.1,
                "total": 4038633385.8
            },
            {
                "times": 10000000,
                "alloc": 1453841988.6,
                "free": 2620324508.4,
                "total": 4074166541.5
            }]
        };

        var vps = {
            "./perf_xmem": [
            {
                "times": 10,
                "alloc": 24951.6,
                "free": 709.6,
                "total": 49432.8
            },
            {
                "times": 100,
                "alloc": 36381.2,
                "free": 4162,
                "total": 65386
            },
            {
                "times": 1000,
                "alloc": 229063.3,
                "free": 38334.6,
                "total": 291006.8
            },
            {
                "times": 10000,
                "alloc": 3707695.8,
                "free": 1410462,
                "total": 5644559.6
            },
            {
                "times": 100000,
                "alloc": 30666495.3,
                "free": 10299321.2,
                "total": 46845326.4
            },
            {
                "times": 1000000,
                "alloc": 295576095,
                "free": 96220954,
                "total": 451967205.6
            },
            {
                "times": 10000000,
                "alloc": 2706789300.4,
                "free": 871131138.4,
                "total": 4254731180.4
            },
            {
                "times": 10000000,
                "alloc": 2752832002.4,
                "free": 875976863.8,
                "total": 4313220123.2
            }],
            "./perf_alloc": [
            {
                "times": 10,
                "alloc": 239765.6,
                "free": 3984.8,
                "total": 243807.6
            },
            {
                "times": 100,
                "alloc": 240783.2,
                "free": 9308,
                "total": 250148.4
            },
            {
                "times": 1000,
                "alloc": 448206.8,
                "free": 64812.5,
                "total": 513077.6
            },
            {
                "times": 10000,
                "alloc": 2926780.9,
                "free": 498968,
                "total": 3425806.1
            },
            {
                "times": 100000,
                "alloc": 27803112.2,
                "free": 6164478.6,
                "total": 33967653.8
            },
            {
                "times": 1000000,
                "alloc": 285312960.8,
                "free": 61277696.4,
                "total": 346590715.4
            },
            {
                "times": 10000000,
                "alloc": 2398735205.2,
                "free": 609656881.2,
                "total": 3008392147.8
            },
            {
                "times": 10000000,
                "alloc": 2383996957,
                "free": 597081234.3,
                "total": 2981078251.8
            }]
        };        
    
        var zanarblahblah = {"./perf_xmem":[{"times":10,"alloc":1173.6,"free":383.6,"total":10104.8},{"times":100,"alloc":9718.8,"free":1822.8,"total":20328.4},{"times":1000,"alloc":85150.8,"free":16020.8,"total":109889.6},{"times":10000,"alloc":1155014,"free":282274,"total":1546682.8},{"times":100000,"alloc":11603865.6,"free":2747750.4,"total":16274670.4},{"times":1000000,"alloc":112886031.8,"free":26817197.4,"total":157638284.4},{"times":10000000,"alloc":1342887245,"free":339350415,"total":1946483018.2},{"times":10000000,"alloc":1411829382.8,"free":355884357.6,"total":2024174383.2}],"./perf_alloc":[{"times":10,"alloc":3950.4,"free":4118,"total":8124.4},{"times":100,"alloc":33478.8,"free":32057.2,"total":65592.4},{"times":1000,"alloc":312811.6,"free":310386.4,"total":623254.4},{"times":10000,"alloc":3162913.6,"free":3106868.8,"total":6269838.4},{"times":100000,"alloc":31724080.8,"free":31756108.4,"total":63480245.2},{"times":1000000,"alloc":319266780,"free":317867819.2,"total":637134658},{"times":10000000,"alloc":3211709190.6,"free":3253840252.6,"total":6465549672.4},{"times":10000000,"alloc":3337355907.6,"free":3334449924.4,"total":6671806082}]};

        var huabanDev = 
{"./perf_xmem":[{"times":10,"alloc":4316.8,"free":482.4,"total":19529.6},{"times":100,"alloc":7081.2,"free":3734.4,"total":25980},{"times":1000,"alloc":57401.6,"free":27391.6,"total":99846},{"times":10000,"alloc":963756.8,"free":512234.4,"total":1690326},{"times":100000,"alloc":9382364.8,"free":4778318.8,"total":16099735.6},{"times":1000000,"alloc":87405898.4,"free":48729046.4,"total":153926956},{"times":10000000,"alloc":1082809374.4,"free":606202156,"total":1952134155.2},{"times":10000000,"alloc":1081459299.6,"free":604584866.8,"total":1949674956.8}],"./perf_alloc":[{"times":10,"alloc":97653.2,"free":4166.4,"total":101874.8},{"times":100,"alloc":101324.4,"free":7309.6,"total":108689.6},{"times":1000,"alloc":193274.4,"free":40183.2,"total":233514.8},{"times":10000,"alloc":1111108.8,"free":374126.8,"total":1485293.2},{"times":100000,"alloc":10559029.6,"free":3695396.8,"total":14254484.4},{"times":1000000,"alloc":111467646,"free":39247373.2,"total":150715077.2},{"times":10000000,"alloc":1106889791.6,"free":396196188.8,"total":1503086035.6},{"times":10000000,"alloc":1105497671.2,"free":393961228.4,"total":1499458954.4}]};
    
        var data = {
            mac: mac,
            VPS: vps,
            zanarblahblah: zanarblahblah,
            huabanDev: huabanDev
        };

        var theme = {
            backgroundColor: '#F2F2E6',
            // 默认色板
            color: [
                '#44B7D3', '#E42B6D', '#F4E24E', '#FE9616', '#8AED35',
                '#ff69b4', '#ba55d3', '#cd5c5c', '#ffa500', '#40e0d0',
                '#E95569', '#ff6347', '#7b68ee', '#00fa9a', '#ffd700',
                '#6699FF', '#ff6666', '#3cb371', '#b8860b', '#30e0e0'
            ],

            // 图表标题
            title:
            {
                x: 'left', // 水平安放位置，默认为左对齐，可选为：
                // 'center' ¦ 'left' ¦ 'right'
                // ¦ {number}（x坐标，单位px）
                y: 'top', // 垂直安放位置，默认为全图顶端，可选为：
                // 'top' ¦ 'bottom' ¦ 'center'
                // ¦ {number}（y坐标，单位px）
                //textAlign: null          // 水平对齐方式，默认根据x设置自动调整
                backgroundColor: '#F2F2E6',
                borderColor: '#ccc', // 标题边框颜色
                borderWidth: 0, // 标题边框线宽，单位px，默认为0（无边框）
                padding: 5, // 标题内边距，单位px，默认各方向内边距为5，
                // 接受数组分别设定上右下左边距，同css
                itemGap: 10, // 主副标题纵向间隔，单位px，默认为10，
                textStyle:
                {
                    fontSize: 18,
                    fontWeight: 'bolder',
                    color: '#8A826D' // 主标题文字颜色
                },
                subtextStyle:
                {
                    color: '#E877A3' // 副标题文字颜色
                }
            },

            // 图例
            legend:
            {
                itemGap: 8
            },

            // 值域
            dataRange:
            {
                x: 'right',
                y: 'center',
                itemWidth: 5,
                itemHeight: 25,
                color: ['#E42B6D', '#F9AD96'],
                text: ['高', '低'], // 文本，默认为数值文本
                textStyle:
                {
                    color: '#8A826D' // 值域文字颜色
                }
            },

            toolbox:
            {
                color: ['#E95569', '#E95569', '#E95569', '#E95569'],
                effectiveColor: '#ff4500',
                itemGap: 8
            },

            // 提示框
            tooltip:
            {
                backgroundColor: 'rgba(138,130,109,0.7)', // 提示背景颜色，默认为透明度为0.7的黑色
                axisPointer:
                { // 坐标轴指示器，坐标轴触发有效
                    type: 'line', // 默认为直线，可选为：'line' | 'shadow'
                    lineStyle:
                    { // 直线指示器样式设置
                        color: '#6B6455',
                        type: 'dashed'
                    },
                    crossStyle:
                    { //十字准星指示器
                        color: '#A6A299'
                    },
                    shadowStyle:
                    { // 阴影指示器样式设置
                        color: 'rgba(200,200,200,0.3)'
                    }
                }
            },

            // 区域缩放控制器
            dataZoom:
            {
                dataBackgroundColor: 'rgba(130,197,209,0.6)', // 数据背景颜色
                fillerColor: 'rgba(233,84,105,0.1)', // 填充颜色
                handleColor: 'rgba(107,99,84,0.8)' // 手柄颜色
            },

            // 网格
            grid:
            {
                borderWidth: 0
            },

            // 类目轴
            categoryAxis:
            {
                axisLine:
                { // 坐标轴线
                    lineStyle:
                    { // 属性lineStyle控制线条样式
                        color: '#6B6455'
                    }
                },
                splitLine:
                { // 分隔线
                    show: false
                }
            },

            // 数值型坐标轴默认参数
            valueAxis:
            {
                axisLine:
                { // 坐标轴线
                    show: false
                },
                splitArea:
                {
                    show: false
                },
                splitLine:
                { // 分隔线
                    lineStyle:
                    { // 属性lineStyle（详见lineStyle）控制线条样式
                        color: ['#FFF'],
                        type: 'dashed'
                    }
                }
            },

            polar:
            {
                axisLine:
                { // 坐标轴线
                    lineStyle:
                    { // 属性lineStyle控制线条样式
                        color: '#ddd'
                    }
                },
                splitArea:
                {
                    show: true,
                    areaStyle:
                    {
                        color: ['rgba(250,250,250,0.2)',
                            'rgba(200,200,200,0.2)'
                        ]
                    }
                },
                splitLine:
                {
                    lineStyle:
                    {
                        color: '#ddd'
                    }
                }
            },

            timeline:
            {
                lineStyle:
                {
                    color: '#6B6455'
                },
                controlStyle:
                {
                    normal:
                    {
                        color: '#6B6455'
                    },
                    emphasis:
                    {
                        color: '#6B6455'
                    }
                },
                symbol: 'emptyCircle',
                symbolSize: 3
            },

            // 柱形图默认参数
            bar:
            {
                itemStyle:
                {
                    normal:
                    {
                        barBorderRadius: 0
                    },
                    emphasis:
                    {
                        barBorderRadius: 0
                    }
                }
            },

            // 折线图默认参数
            line:
            {
                smooth: true,
                symbol: 'emptyCircle', // 拐点图形类型
                symbolSize: 3 // 拐点图形大小
            },


            // K线图默认参数
            k:
            {
                itemStyle:
                {
                    normal:
                    {
                        color: '#E42B6D', // 阳线填充颜色
                        color0: '#44B7D3', // 阴线填充颜色
                        lineStyle:
                        {
                            width: 1,
                            color: '#E42B6D', // 阳线边框颜色
                            color0: '#44B7D3' // 阴线边框颜色
                        }
                    }
                }
            },

            // 散点图默认参数
            scatter:
            {
                itemdStyle:
                {
                    normal:
                    {
                        borderWidth: 1,
                        borderColor: 'rgba(200,200,200,0.5)'
                    },
                    emphasis:
                    {
                        borderWidth: 0
                    }
                },
                symbol: 'circle', // 图形类型
                symbolSize: 4 // 图形大小，半宽（半径）参数，当图形为方向或菱形则总宽度为symbolSize * 2
            },

            // 雷达图默认参数
            radar:
            {
                symbol: 'emptyCircle', // 图形类型
                symbolSize: 3
                    //symbol: null,         // 拐点图形类型
                    //symbolRotate : null,  // 图形旋转控制
            },

            map:
            {
                itemStyle:
                {
                    normal:
                    {
                        areaStyle:
                        {
                            color: '#ddd'
                        },
                        label:
                        {
                            textStyle:
                            {
                                color: '#E42B6D'
                            }
                        }
                    },
                    emphasis:
                    { // 也是选中样式
                        areaStyle:
                        {
                            color: '#fe994e'
                        },
                        label:
                        {
                            textStyle:
                            {
                                color: 'rgb(100,0,0)'
                            }
                        }
                    }
                }
            },

            force:
            {
                itemStyle:
                {
                    normal:
                    {
                        nodeStyle:
                        {
                            strokeColor: 'rgba(0,0,0,0)'
                        },
                        linkStyle:
                        {
                            strokeColor: '#6B6455'
                        }
                    }
                }
            },

            chord:
            {
                padding: 4,
                itemStyle:
                {
                    normal:
                    {
                        lineStyle:
                        {
                            width: 0,
                            color: 'rgba(128, 128, 128, 0.5)'
                        },
                        chordStyle:
                        {
                            lineStyle:
                            {
                                width: 0,
                                color: 'rgba(128, 128, 128, 0.5)'
                            }
                        }
                    },
                    emphasis:
                    {
                        lineStyle:
                        {
                            width: 1,
                            color: 'rgba(128, 128, 128, 0.5)'
                        },
                        chordStyle:
                        {
                            lineStyle:
                            {
                                width: 1,
                                color: 'rgba(128, 128, 128, 0.5)'
                            }
                        }
                    }
                }
            },

            gauge:
            { // 仪表盘
                center: ['50%', '80%'],
                radius: '100%',
                startAngle: 180,
                endAngle: 0,
                axisLine:
                { // 坐标轴线
                    show: true, // 默认显示，属性show控制显示与否
                    lineStyle:
                    { // 属性lineStyle控制线条样式
                        color: [
                            [0.2, '#44B7D3'],
                            [0.8, '#6B6455'],
                            [1, '#E42B6D']
                        ],
                        width: '40%'
                    }
                },
                axisTick:
                { // 坐标轴小标记
                    splitNumber: 2, // 每份split细分多少段
                    length: 5, // 属性length控制线长
                    lineStyle:
                    { // 属性lineStyle控制线条样式
                        color: '#fff'
                    }
                },
                axisLabel:
                { // 坐标轴文本标签，详见axis.axisLabel
                    textStyle:
                    { // 其余属性默认使用全局文本样式，详见TEXTSTYLE
                        color: '#fff',
                        fontWeight: 'bolder'
                    }
                },
                splitLine:
                { // 分隔线
                    length: '5%', // 属性length控制线长
                    lineStyle:
                    { // 属性lineStyle（详见lineStyle）控制线条样式
                        color: '#fff'
                    }
                },
                pointer:
                {
                    width: '40%',
                    length: '80%',
                    color: '#fff'
                },
                title:
                {
                    offsetCenter: [0, -20], // x, y，单位px
                    textStyle:
                    { // 其余属性默认使用全局文本样式，详见TEXTSTYLE
                        color: 'auto',
                        fontSize: 20
                    }
                },
                detail:
                {
                    offsetCenter: [0, 00], // x, y，单位px
                    textStyle:
                    { // 其余属性默认使用全局文本样式，详见TEXTSTYLE
                        color: 'auto',
                        fontSize: 40
                    }
                }
            },

            textStyle:
            {
                fontFamily: '微软雅黑, Arial, Verdana, sans-serif'
            }
        };
        var machines = ["Macbook Air", "VPS", "Machine 3"];
    </script>
</head>

<body>
    <h1>Performance Report of X Memo Pool</h1>

    <h2>Machines</h2>

    <h3>Macbook Air</h3>
    <ul>
        <li>CPU: 4 x 1.3GHz Intel Core i5</li>
        <li>Memo: 4GB 1600 MHz DDR3</li>
        <li>System: OS X Yosemite 10.10.2</li>
    </ul>

    <h3>XadillaX' VPS</h3>
    <ul>
        <li>CPU: 2 x Intel(R) Xeon(R) CPU E5-2620 0 @ 2.00GHz</li>
        <li>Memo: 1GB</li>
        <li>System: Ubuntu 12.04.2 LTS (3.5.0-23-generic)</li>
    </ul>
    
    <h3>Yet another PC (Machine 3)</h3>
    <ul>
        <li>CPU: 2 x Intel(R) Pentium(R) CPU G620 @ 2.60GHz</li>
        <li>Memo: 2 x 4GB 1600 MHz DDR3</li>
        <li>System: Windows 7</li>
    </ul>

    <h3>Huaban Dev Server</h3>
    <ul>
        <li>CPU: 24 x Intel(R) Xeon(R) CPU E5-2620 @ 2.00GHz</li>
        <li>Memo: 6 x 8GB 1333 MHz DDR3</li>
        <li>System: CentOS release 6.6 (Final)</li>
    </ul>


    <h2>Charts</h2>

    <div id="total" style="height: 400px;"></div>
    <br />
    <div id="alloc" style="height: 400px;"></div>
    <br />
    <div id="free" style="height: 400px;"></div>
    <script src="echarts/echarts-all.js"></script>
    <script>
        function getData(machine, type) {
            var _data = data[machine];
            var xmem = _data["./perf_xmem"];
            var alloc = _data["./perf_alloc"];
            var result = [];
            for (var i = 0; i < xmem.length; i++)
            {
                var value = (alloc[i][type] - xmem[i][type]) / alloc[i][
                    type
                ];
                result.push((value * 100).toFixed(2));
            }
            return result;
        }

        var totalReport = echarts.init(document.getElementById("total"), theme);
        var allocReport = echarts.init(document.getElementById("alloc"), theme);
        var freeReport = echarts.init(document.getElementById("free"), theme);

        var totalOption = {
            title:
            {
                text: "The whole process"
            },
            tooltip:
            {
                trigger: "axis"
            },
            legend:
            {
                data: machines
            },
            toolbox:
            {
                show: true,
                feature:
                {
                    mark:
                    {
                        show: true
                    },
                    dataView:
                    {
                        show: true,
                        readOnly: false
                    },
                    magicType:
                    {
                        show: true,
                        type: ["line", "bar", "stack", "tiled"]
                    },
                    restore:
                    {
                        show: true
                    },
                    saveAsImage:
                    {
                        show: true
                    }
                }
            },
            calculable: true,
            xAxis: [
            {
                type: "category",
                boundaryGap: false,
                data: ["10", "100", "1000", "10000", "100000",
                    "1000000", "1000000"
                ]
            }],
            yAxis: [
            {
                type: "value"
            }],
            series: [
            {
                name: "Macbook Air",
                type: "line",
                stack: "Rate",
                data: getData("mac", "total")
            },
            {
                name: "VPS",
                type: "line",
                stack: "Rate",
                data: getData("VPS", "total")
            },
            {
                name: "Machine 3",
                type: "line",
                stack: "Rate",
                data: getData("zanarblahblah", "total")
            }]
        };

        var allocOption = {
            title:
            {
                text: "Alloc faster rate"
            },
            tooltip:
            {
                trigger: "axis"
            },
            legend:
            {
                data: machines
            },
            toolbox:
            {
                show: true,
                feature:
                {
                    mark:
                    {
                        show: true
                    },
                    dataView:
                    {
                        show: true,
                        readOnly: false
                    },
                    magicType:
                    {
                        show: true,
                        type: ["line", "bar", "stack", "tiled"]
                    },
                    restore:
                    {
                        show: true
                    },
                    saveAsImage:
                    {
                        show: true
                    }
                }
            },
            calculable: true,
            xAxis: [
            {
                type: "category",
                boundaryGap: false,
                data: ["10", "100", "1000", "10000", "100000",
                    "1000000", "1000000"
                ]
            }],
            yAxis: [
            {
                type: "value"
            }],
            series: [
            {
                name: "Macbook Air",
                type: "line",
                stack: "Rate",
                data: getData("mac", "alloc")
            },
            {
                name: "VPS",
                type: "line",
                stack: "Rate",
                data: getData("VPS", "alloc")
            },
            {
                name: "Machine 3",
                type: "line",
                stack: "Rate",
                data: getData("zanarblahblah", "alloc")
            }]
        };

        var freeOption = {
            title:
            {
                text: "Free faster rate"
            },
            tooltip:
            {
                trigger: "axis"
            },
            legend:
            {
                data: machines
            },
            toolbox:
            {
                show: true,
                feature:
                {
                    mark:
                    {
                        show: true
                    },
                    dataView:
                    {
                        show: true,
                        readOnly: false
                    },
                    magicType:
                    {
                        show: true,
                        type: ["line", "bar", "stack", "tiled"]
                    },
                    restore:
                    {
                        show: true
                    },
                    saveAsImage:
                    {
                        show: true
                    }
                }
            },
            calculable: true,
            xAxis: [
            {
                type: "category",
                boundaryGap: false,
                data: ["10", "100", "1000", "10000", "100000",
                    "1000000", "1000000"
                ]
            }],
            yAxis: [
            {
                type: "value"
            }],
            series: [
            {
                name: "Macbook Air",
                type: "line",
                stack: "Rate",
                data: getData("mac", "free")
            },
            {
                name: "VPS",
                type: "line",
                stack: "Rate",
                data: getData("VPS", "free")
            },
            {
                name: "Machine 3",
                type: "line",
                stack: "Rate",
                data: getData("zanarblahblah", "free")
            }]
        };

        totalReport.setOption(totalOption);
        allocReport.setOption(allocOption);
        freeReport.setOption(freeOption);
    </script>
</body>

</html>
